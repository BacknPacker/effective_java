# 3ì¥ ëª¨ë“  ê°ì²´ì˜ ê³µí†µ ë©”ì„œë“œ
ëª¨ë“  ê°ì²´ì˜ ì¡°ìƒì€ Object í´ë˜ìŠ¤ì´ë‹¤.  
Objectì—ì„œ finalì´ ì•„ë‹Œ ë©”ì„œë“œëŠ” ëª¨ë‘ ì¬ì •ì˜(overriding)ë¥¼ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ëë‹¤.  
í•˜ì§€ë§Œ ì¬ì •ì˜ë¥¼ ì¼ë°˜ ê·œì•½ì— ë§ì§€ ì•Šê²Œ êµ¬í˜„í•˜ë©´ ì˜ë„ì™€ ë‹¤ë¥´ê²Œ ë™ì‘í•  ìˆ˜ ìˆë‹¤.

> ìš°ë¦¬ëŠ” ì´ëŸ° ë©”ì„œë“œë“¤ì„ ì–¸ì œ ì–´ë–»ê²Œ ì¬ì •ì˜í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ì•¼í•œë‹¤.

## ì•„ì´í…œ 10. equalsëŠ” ì¼ë°˜ ê·œì•½ì„ ì§€ì¼œ ì¬ì •ì˜í•˜ë¼.
> equalsëŠ” ì¬ì •ì˜í•˜ê¸° ì‰¬ì›Œ ë³´ì´ì§€ë§Œ ê³³ê³³ì— í•¨ì •ì´ ìˆë‹¤.  
> ì´ëŸ° í•¨ì •ì„ í”¼í•˜ëŠ” ê°€ì¥ ì‰¬ìš´ê¸¸ì€ ì•„ì˜ˆ ì¬ì •ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤.

### âœ… equalsë¥¼ ì¬ì •ì˜ í•˜ë©´ ì•ˆë˜ëŠ” ê²½ìš°.
#### 1. ê° ì¸ìŠ¤í„´ìŠ¤ê°€ ë³¸ì§ˆì ìœ¼ë¡œ ê³ ìœ í•  ë•Œ
- ê°’ì´ ì•„ë‹Œ ë™ì‘í•˜ëŠ” ê°œì²´ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë™ì¼í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì—†ê¸°ì— Objectì˜ equalsë¡œ ì¶©ë¶„í•˜ë‹¤.  
- ì˜ˆ) Tread

#### 2. ì¸ìŠ¤í„´ìŠ¤ì˜ ë…¼ë¦¬ì  ë™ì¹˜ì„±(ogical equality)ë¥¼ ê²€ì‚¬í•  ì¼ì´ ì—†ì„ ë•Œ
- ê°’ì„ ë¹„êµí•´ì„œ ë™ë“±í•œì§€ ë¹„êµí•  ì¼ì´ ì—†ë‹¤ == ë…¼ë¦¬ì  ë™ì¹˜ì„± ê²€ì‚¬ í•  ì¼ì´ ì—†ë‹¤.
- ê¸°ë³¸ì ì¸ Objectì˜ equalsë¡œ ì¶©ë¶„í•˜ë‹¤.

#### 3. ìƒìœ„ í´ë˜ìŠ¤ì—ì„œ ì¬ì •ì˜í•œ equalsê°€ í•˜ìœ„ í´ë˜ìŠ¤ì—ë„ ë“¤ì–´ë§ì„ ë•Œ
- ìƒìœ„ì—ì„œ êµ¬í˜„í•œ equalsë¡œì§ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
- ì˜ˆ) `Set` êµ¬í˜„ì²´ëŠ” `AbstractSet`ì´ êµ¬í˜„í•œ equalsë¥¼ ìƒì†ë°›ì•„ ì“´ë‹¤.

#### 4. í´ë˜ìŠ¤ê°€ priviateì´ê±°ë‚˜ package-privateì´ê³  equals ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ì¼ì´ ì—†ë‹¤.

```java
// equalsê°€ ì‹¤ìˆ˜ë¡œë¼ë„ í˜¸ì¶œë˜ëŠ” ê±¸ ë§‰ê³ ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ê°™ì´ ì¬ì •ì˜í•´ì£¼ë©´ ëœë‹¤.
@Override public boolean equals(Object o) {
  throw new AssertionError(); // í˜¸ì¶œ ê¸ˆì§€!
}
```

<hr/>

### âœ… equals ì¬ì •ì˜ ê·œì•½
> equalsëŠ” ë™ì¹˜ê´€ê³„(equivalence relation)ë¥¼ êµ¬í˜„í•˜ë©°, ì•„ë˜ë¥¼ ë§Œì¡±í•´ì•¼í•©ë‹ˆë‹¤.
> ëª¨ë‘ null ì•„ë‹Œ ì°¸ì¡°ê°’ì´ë¼ëŠ” ì „ì œí•˜ì— ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.

#### 1. ë°˜ì‚¬ì„±(reflextivity)
  - xì— ëŒ€í•´ x.equals(x)ëŠ” trueë‹¤.
#### 2. ëŒ€ì¹­ì„±(symmetry)
  - x, yì— ëŒ€í•´, x.equals(y)ê°€ trueë©´ y.equals(x)ë„ trueë‹¤.  

    **2-1. ëŒ€ì¹­ì„± ìœ„ë°˜ ì˜ˆì‹œ**
    ```java
    private final String s;

    public CaseInsensitiveString(String s) {
        this.s = Objects.requireNonNull(s);
    }

    // ëŒ€ì¹­ì„± ìœ„ë°° ì½”ë“œ
    @Override
    public boolean equals(Object o) {
        if (o instanceof CaseInsensitiveString) {
            return s.equalsIgnoreCase(
                    ((CaseInsensitiveString) o).s);
        }
        if(o instanceof String) { // Stringê³¼ì˜ ë¹„êµ ì—°ì‚° ì‹œë„ í•œ ë°©í–¥ ì‘ë™
            // equalsIgnoreCase => ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì•ˆí•¨
            return s.equalsIgnoreCase((String) o);
        }
        return false;
    }
    ```
    **2-1. í…ŒìŠ¤íŠ¸ ì½”ë“œ**
    ```java
    private static CaseInsensitiveString cis;
    private static String s;

    @BeforeEach
    void beforeEach() {
        cis = new CaseInsensitiveString("Polish");
        s = "polish";
    }

    @Test
    @DisplayName("ëŒ€ì¹­ì„± ìœ„ë°° í…ŒìŠ¤íŠ¸ String <-> CaseInsensitiveString")
    void ëŒ€ì¹­ì„±_ìœ„ë°°_í…ŒìŠ¤íŠ¸_String_CaseInsensitiveString() {
        Assertions.assertEquals(cis.equals(s), s.equals(cis)); // ê°œì„  í›„ true ë°˜í™˜
        // CaseInsensitiveStringì˜ equalsëŠ” ì˜ ì‘ë™í•œë‹¤.
        // í•˜ì§€ë§Œ Stringì˜ equalsëŠ” CaseInsensitiveStringì˜ ì¡´ì¬ë¥¼ ì•Œì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— falseê°€ ë°˜í™˜ì´ ëœë‹¤.
    }
    ```
    ![image](https://user-images.githubusercontent.com/53300830/163711314-4f1bca4c-b22b-4ea9-9f8e-6e24a781cb49.png)

    **2-2. í•´ê²° ì½”ë“œ**
    ```java
    //ëŒ€ì¹­ì„±ì„ ë§Œì¡±í•˜ê²Œ ìˆ˜ì •
    public boolean equals(Object o) {
        return o instanceof CaseInsensitiveString &&
                ((CaseInsensitiveString) o).s.equalsIgnoreCase(s);
    }
    ```
    **2-3. í…ŒìŠ¤íŠ¸ ì½”ë“œ(2-1 í…ŒìŠ¤íŠ¸ ì½”ë“œì™€ ë™ì¼)**

    ![image](https://user-images.githubusercontent.com/53300830/163711463-b03941b7-3a9a-4181-8bea-879a95b57c57.png)

#### 3. ì¶”ì´ì„±(transitivity)
  - nullì´ ì•„ë‹Œ ëª¨ë“  ì°¸ì¡° ê°’ì€ aRbì´ê³  bRcì´ë©´ aRcì´ë‹¤.

    **3-1. ëŒ€ì¹­ì„± ìœ„ë°˜**
    ```java
    public class Point {
      private final int x;
      private final int y;

      public Point(int x, int y) {
          this.x = x;
          this.y = y;
      }

      @Override
      public boolean equals(Object o) {
          if (!(o instanceof Point))
              return false;
          Point p = (Point)o;
          return p.x == x && p.y == y; // ìƒ‰ìƒì„ ë¬´ì‹œí•œë‹¤.
      }
    }
    ```
    ```java
    public class ColorPoint extends Point {

        private Color color;

        public ColorPoint(int x, int y, Color color) {
            super(x, y);
            this.color = color;
        }

        // ëŒ€ì¹­ì„± ìœ„ë°˜
        @Override public boolean equals(Object o){
            if(!(o instanceof ColorPoint))
                return false;
            return super.equals(o) && ((ColorPoint) o).color == color;
        }
    }
    ```
    
    **3-1. í…ŒìŠ¤íŠ¸ ì½”ë“œ**
    ```java
    
    private static ColorPoint p1, p3;
    private static Point p2;

    @BeforeEach
    void Point_ColorPoint_ì¶”ê°€() {
        p1 = new ColorPoint(1, 2, Color.RED);
        p2 = new Point(1, 2);
        p3 = new ColorPoint(1, 2, Color.BLUE);
    }
    
    @Test
    @DisplayName("ëŒ€ì¹­ì„± ìœ„ë°° ë¬¸ì œ")
    void ëŒ€ì¹­ì„±_ìœ„ë°°_ë¬¸ì œ() {
        // aRb ì´ë©´ bRaì´ë‹¤.

        // p1~ : ColorPoint equals (color í•„ë“œì—ì„œ false)
        // p2~ : Point equals (color ë¥¼ ë¬´ì‹œí•˜ê³  ture ë°˜í™˜)
        assertEquals(p1.equals(p2), p2.equals(p1));
    }
    ```
    ![image](https://user-images.githubusercontent.com/53300830/163712213-1fdd998b-a330-42a7-9ab9-c6414fcb0dbd.png)

    **3-2. ëŒ€ì¹­ì„± ìœ„ë°˜ í•´ê²° But ì¶”ì´ì„±ì„ ìœ„ë°˜**
    ```java
    // ì¶”ì´ì„± ìœ„ë°°
    @Override
    public boolean equals(Object o){
        if(!(o instanceof Point))
            return false;
        // oê°€ ì¼ë°˜ Pointë©´ ìƒ‰ìƒì„ ë¬´ì‹œí•˜ê³  ë¹„êµí•˜ê²Œ ëœë‹¤.
        if(!(o instanceof ColorPoint))
            return o.equals(this);
        // oê°€ ColorPointë©´ ìƒ‰ìƒê¹Œì§€ ë¹„êµí•˜ê²Œ ëœë‹¤.
        return super.equals(o) && ((ColorPoint) o).color == color;
    }
    ```
    
    **3-2. í…ŒìŠ¤íŠ¸ ì½”ë“œ**
    ```java
    @Test
    @DisplayName("ì¶”ì´ì„± ìœ„ë°° ë¬¸ì œ")
    void ì¶”ì´ì„±_ìœ„ë°°_ë¬¸ì œ() {
        // aRb ì´ê³  bRc ì´ë©´ aRcì„ ë§Œì¡±í•œë‹¤.
        assertAll(
            // aRb
            () -> assertFalse(p1.equals(p2)), // 1. ColorPoint equals  ì˜ˆìƒ ê°’ : false // ê²°ê³¼ ê°’ : true
            // bRc
            () -> assertFalse(p2.equals(p3)), // 1. Point equals ì˜ˆìƒ ê°’ : false // ê²°ê³¼ ê°’ : true
            // aRc
            () -> assertFalse(p1.equals(p3)) //  1. ColorPoint equals ì˜ˆìƒ ê°’ : false // ê²°ê³¼ ê°’ : false
        );
    }
    ```
    ![image](https://user-images.githubusercontent.com/53300830/163712296-c9f9929c-ae54-4988-ae5e-bd39b7ab92a3.png)
    
    3-3. ë¬´í•œ ì¬ê·€ì— ë¹ ì§ˆ ìˆ˜ ìˆë‹¤. [ì½”ë“œ ì°¸ê³  ìë°”ë´„ ë¸”ë¡œê·¸](https://javabom.tistory.com/2)
    > ì´ì²˜ëŸ¼ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•´ ìƒˆë¡œìš´ ê°’ì„ ì¶”ê°€í•˜ë©´ì„œ equals ê·œì•½ì„ ë§Œì¡±ì‹œí‚¬ ë°©ë²•ì€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.

    3-4. instanceOfë¥¼ getClassë¡œ ë°”ê¿”ë³´ì.
    ```java
    @Override 
    public boolean equals(Object o){
      if(o == null || o.getClass() != getClass())
          return false;
      Point p = (Point) o;
      return p.x == x && p.y == y;
    }
    ```
    > Pointì˜ í•˜ìœ„í´ë˜ìŠ¤ëŠ” ì •ì˜ìƒ ì—¬ì „íˆ Pointì´ê¸° ë•Œë¬¸ì— ì–´ë””ì„œë“  Pointë¡œ í™œìš© ë  ìˆ˜ ìˆì–´ì•¼í•œë‹¤.  
    > ì¦‰ ë¦¬ìŠ¤ì½”í”„ ì›ì¹™ì„ ê·œë°°í•˜ê²Œ ëœë‹¤. (59í˜ì´ì§€ ì°¸ê³ )

    <details>
    <summary>ë¦¬ìŠ¤ì½”í”„ ì›ì¹™</summary>
    <div markdown="1">
      
      **ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ì›ì¹™ (Liskov substitution principle)**
      
        ì–´ë–¤ íƒ€ì…ì— ìˆì–´ ì¤‘ìš”í•œ ì†ì„±ì´ë¼ë©´ ê·¸ í•˜ìœ„ íƒ€ì…ì—ì„œë„ ë§ˆì°¬ê°€ì§€ë¡œ ì¤‘ìš”í•˜ë‹¤.   
        ê·¸ëŸ¬ë¯€ë¡œ ëª¨ë“  ë©”ì„œë“œê°€ í•˜ìœ„ íƒ€ì…ì—ì„œë„ ë˜‘ê°™ì´ ì˜ ì‘ë™í•´ì•¼ í•œë‹¤.
      
    </div>
    </details>
    
    <hr/>
    
    ### ğŸ“‹ í•´ê²° ë°©ë²•
    #### ìƒì†ëŒ€ì‹  ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•´ë³´ì.
     ```java
     public class ColorPoint {
         private final Point point;
         private final Color color;

         public ColorPoint(int x, int y, Color color) {
             point = new Point(x, y);
             this.color = Objects.requireNonNull(color);
         }

         // ì´ ColorPointì˜ Point ë·°ë¥¼ ë°˜í™˜í•œë‹¤.
         public Point asPoint() {
             return point;
         }

         @Override
         public boolean equals(Object o) {
             if (!(o instanceof ColorPoint)) return false;

             ColorPoint cp = (ColorPoint) o;
             return cp.point.equals(point) && cp.color.equals(color);
         }
     }
     ```
      ![image](https://user-images.githubusercontent.com/53300830/163713558-db59e89f-bf00-4184-b919-0469e34d37a8.png)

    
#### 4. ì¼ê´€ì„±(constistency)
  - x.equals(y)ë¥¼ ë°˜ë³µí•´ì„œ í˜¸ì¶œí•˜ë©´ í•­ìƒ trueë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ í•­ìƒ falseë¥¼ ë°˜í™˜í•œë‹¤.
  - ì¦‰ ë‘ ê°ì²´ê°€ ê°™ë‹¤ë©´ **ì•ìœ¼ë¡œë„ ì˜ì›íˆ ê°™ì•„ì•¼ í•œë‹¤ëŠ” ëœ»**ì´ë‹¤. (ìˆ˜ì •ì´ ì—†ë‹¤ëŠ” ê°€ì •í•˜ì—)
  - íŠ¹íˆ `ë¶ˆë³€ í´ë˜ìŠ¤`ëŠ” equalsì˜ ê²°ê³¼ëŠ” í•­ìƒ ë™ì¼í•´ì•¼ í•œë‹¤.

    #### 4-1. equalsì˜ íŒë‹¨ì— ì‹ ë¢°í•  ìˆ˜ ì—†ëŠ” ìì›ì´ êº¼ì–´ë“¤ê²Œ í•´ì„œëŠ” ì•ˆëœë‹¤.  
    >java.net.URL ì—¬ê¸°ì„œ equalsëŠ” URLê³¼ ë§¤í•‘ëœ í˜¸ìŠ¤íŠ¸ IPì£¼ì†Œë¥¼ ì´ìš©í•´ ë¹„êµí•˜ê²Œ ë˜ë©´,  
    >í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ IPì£¼ì†Œë¡œ ë°”ê¾¸ëŸ¬ë©´ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•˜ê²Œ ë˜ê³  ê·¸ë ‡ê²Œ ë˜ë©´ ê²°ê³¼ëŠ” í•­ìƒ ë‹¬ë¼ì§„ë‹¤.

    #### 4-2. equalsë¥¼ í•­ì‹œ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ëŠ” ê°ì²´ë§Œì„ ì‚¬ìš©í•œ ê²°ì •ì  ê³„ì‚°ë§Œ ìˆ˜í–‰í•˜ê²Œ í•œë‹¤.
  
  
#### 5. null-ì•„ë‹˜
  - x.equals(null)ì€ falseë‹¤.

<hr/>

### âœ… ì–‘ì§ˆì˜ equalsë¥¼ êµ¬í˜„í•˜ëŠ” 4ë‹¨ê³„ 
  1. ì—°ì‚°ìë¥¼ ì‚¬ìš©í•´ ì…ë ¥ì´ ìê¸° ìì‹ ì˜ ì°¸ì¡°ì¸ì§€ í™•ì¸ë‹¤.
  2. `instanceOf` ì—°ì‚°ìë¡œ ì…ë ¥ì´ ì˜¬ë°”ë¥¸ íƒ€ì…ì¸ì§€ í™•ì¸í•œë‹¤.  
    - ì˜¬ë°”ë¥¸ íƒ€ì…ì˜ ê²½ìš° : `equals`ê°€ ì •ì˜ëœ í´ë˜ìŠ¤ë¡œ ë¦¬í„´ì´ ë˜ëŠ”ì§€ í™•ì¸  
    - ì˜¬ë°”ë¥¸ íƒ€ì…ì´ ì•„ë‹Œ ê²½ìš° : `equals`ê·œì•½ì„ ìˆ˜ì •í•œë‹¤.
  3. ì…ë ¥ì„ ì˜¬ë°”ë¥¸ íƒ€ì…ìœ¼ë¡œ í˜•ë³€í™˜ í•œë‹¤.
    - 2ë‹¨ê³„ `instanceOf` ë¥¼ í–ˆê¸° ë•Œë¬¸ì— ë¬´ì¡°ê±´ í†µê³¼í•œë‹¤.
  4. ì…ë ¥í•œ ê°ì²´ì™€ ìê¸° ìì‹ ì˜ ëŒ€ì‘ë˜ëŠ” 'í•µì‹¬' í•„ë“œë“¤ì´ ëª¨ë‘ ì¼ì¹˜í•˜ëŠ”ì§€ í•˜ë‚˜ì”© ê²€ì‚¬í•œë‹¤.  
    - 2ë‹¨ê³„ì—ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆì„ ê²½ìš° ì…ë ¥ì˜ í•„ë“œê°’ì„ ê°€ì ¸ì˜¬ë•Œë„ ê·¸ ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.

### â›”ï¸ ì£¼ì˜ì‚¬í•­
  1. equalsë¥¼ ì¬ì •ì˜í•  ë• hashCodeë„ ë°˜ë“œì‹œ ì¬ì •ì˜ í•˜ì.
  2. ë„ˆë¬´ ë³µì¡í•˜ê²Œ í•´ë”í•˜ë ¤ ë“¤ì§€ ë§ì (í•„ë“œë“¤ì˜ ë™ì¹˜ì„± ì •ë„ë§Œ ê²€ì‚¬í•˜ì)
  3. Objectì™¸ì˜ íƒ€ì…ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ” equals ë©”ì„œë“œëŠ” ì„ ì–¸í•˜ì§€ ë§ì.  
    ```java
    public boolean equals(MyClass o) // @Overriderê°€ ì•„ë‹ˆë‹¤. ì¬ì •ì˜ê°€ ì•„ë‹ˆë¼ ë‹¤ì¤‘ì •ì˜(ì•„ì´í…œ52)í•œ ê²ƒì´ë‹¤.
    ```

### âœï¸ ì •ë¦¬
    ê¼­ í•„ìš”í•œ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ equalsë¥¼ ì¬ì •ì˜í•˜ì§€ ë§ì. ê¼­ í•„ìš”í•˜ë‹¤ë©´ 5ê°€ì§€ ê·œì•½ì„ ê¼­ ì§€í‚¤ì.  
    
    
## ì•„ì´í…œ 11. equalsë¥¼ ì¬ì •ì˜í•˜ë ¤ê±°ë“  hashCodeë„ ì¬ì •ì˜í•˜ë¼.
> equals : ë‘ ê°ì²´ì˜ ë‚´ìš©ì´ ê°™ì€ì§€ ë™ì¹˜ì„±(eqaulity)ë¥¼ ë¹„êµ.   
> hashCode : ë‘ ê°ì²´ê°€ ê°™ì€ ê°ì²´ì¸ì§€ ë™ì¼ì„±(identity)ë¥¼ ë¹„êµ

### â“ ì™œ 'í•­ìƒ' ì¬ì •ì˜ í•˜ëŠ” ê±¸ê¹Œ?
> haseCodeë„ ì¼ë°˜ ê·œì•½ì„ ì–´ê¸°ê²Œ ë˜ê¸°ë•Œë¬¸ì´ë‹¤.  
> HashMapì´ë‚˜ HashSet ê°™ì€ ì»¬ë ‰ì…˜ì˜ ì›ì†Œë¡œ ì‚¬ìš©í•  ë•Œ ë¬¸ì œê°€ ìƒê¸´ë‹¤.
<hr/>

### ğŸ“‹ Objectëª…ì„¸ì—ì„œ ë°œì·Œí•œ HashCode ê·œì•½
#### 1. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìœ ì§€ë˜ëŠ” ë™ì•ˆ ë™ì¼í•œ ê°ì²´ì˜ `equals` ë¹„êµëŠ” í•­ìƒ ê°™ì€ ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.
#### 2. `equals` ê°€ ë‘ ê°ì²´ê°€ íŒë‹¨í–ˆë‹¤ë©´, ë‘ ê°ì²´ì˜ hashCodeëŠ” ë˜‘ê°™ì€ ê°’ì„ ë°˜í™˜í•´ì•¼í•œë‹¤. -> `ì¬ì •ì˜ë¥¼ ì˜ëª»í–ˆì„ë•Œ í¬ê²Œ ë¬¸ì œê°€ ë˜ëŠ” ì‚¬í•­`
#### 3. `equals` ê°€ ë‘ ê°ì²´ê°€ ë‹¤ë¥´ë‹¤ê³  íŒë‹¨í–ˆë”ë¼ë„, ë‘ ê°ì²´ì˜ hashCodeê°€ ì„œë¡œ ë‹¤ë¥¸ ê°’ì„ ë°˜í™˜í•  í”¼ìš”ëŠ” ì—†ë‹¤. 
  > í•˜ì§€ë§Œ ë‹¤ë¥¸ ê°’ì„ ë°˜í™˜í•´ì•¼ í•´ì‹œí…Œì´ë¸”ì˜ ì„±ëŠ¥ì´ ì¢‹ì•„ì§„ë‹¤.
  
<hr/>
  
### â›”ï¸ ì¬ì •ì˜ ì•ˆí•  ê²½ìš° ìƒê¸°ëŠ” ë¬¸ì œ
```java
public class PhoneNumber {
    private String prefix;
    private String middle;
    private String suffix;

    public PhoneNumber(String prefix, String middle, String suffix) {
        this.prefix = prefix;
        this.middle = middle;
        this.suffix = suffix;
    }
    
    // eqauls ì¬ì •ì˜
    @Override 
    public boolean equals(Object o) {
        if (this == o) return true;
        if (!(o instanceof PhoneNumber)) return false;
        PhoneNumber that = (PhoneNumber) o;
        return Objects.equals(prefix, that.prefix)
                && Objects.equals(middle, that.middle)
                && Objects.equals(suffix, that.suffix);
    }
    // TODO 
    // HashCode ì¬ì •ì˜ í•„ìš”! 
}

@Test
@DisplayName("EffectiveJava hashCode ì¬ì •ì˜ ëˆ„ë½ ë¬¸ì œ")
void í•´ì‰¬ì½”ë“œ_ì¬ì •ì˜ë¬¸ì œ() {
    PhoneNumber phoneNumber= new PhoneNumber("010", "1234", "5678");

    Map<PhoneNumber, String> map = new HashMap<>();
    map.put(phoneNumber, "Jenny");

    assertEquals(map.get(new PhoneNumber("010", "1234", "5678")), "Jenny");
    // Jennyê°€ ë°˜í™˜ ë  ê²ƒì´ë¼ê³  ì˜ˆìƒ -> ê²°ê³¼ : null
}
```
![image](https://user-images.githubusercontent.com/53300830/164171051-e733586f-55a5-4e31-96e0-a6d20d4416d2.png)

#### â“ ì™œ 'null'ì´ ë°˜í™˜ë˜ëŠ”ê±¸ê¹Œ?
- ì´ 2ê°œì˜ PhoneNumber ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚¬ìš© ëìŠµë‹ˆë‹¤.
- eqalsë¥¼ ì¬ì •ì˜ í–ˆì§€ë§Œ hashCodeë¥¼ ì¬ì •ì˜ ì•ˆí–ˆìœ¼ë¯€ë¡œ ë‘ ë²ˆì§¸ ê·œì•½ ìœ„ë°˜
> hashCodeê°€ ë‹¤ë¥´ë©´ ë™ì¹˜ì„±(eqauls) ë¹„êµì¡°ì°¨ í•˜ì§€ ì•ŠëŠ”ë‹¤.

<hr/>

### â›”ï¸ ìµœì•…ì´ì§€ë§Œ ì ë²•í•œ ë°©ë²•ìœ¼ë¡œ hashCode êµ¬í˜„
```java
@Override public int hashCode() { return 42; } 
// ìµœì•…ì´ì§€ë§Œ ì ë²•í•˜ë‹¤.
// í‰ê·  ìˆ˜í–‰ì‹œê°„ì´ O(1) -> O(N)ì´ ë˜ë¯€ë¡œ ì„±ëŠ¥ ì €í•˜ê°€ ì‹¬ê°í•˜ë‹¤.
```

### ğŸ“‹ ì˜¬ë°”ë¥¸ hashCode êµ¬í˜„ ë°©ë²•
  #### ì¢‹ì€ í•´ì‹œ í•¨ìˆ˜ë¼ë©´ ì„œë¡œ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ì— ë‹¤ë¥¸ í•´ì‹œì½”ë“œë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤.

  1. ì§€ì—­ë³€ìˆ˜ ì„ ì–¸ í›„ í•µì‹¬ í•„ë“œ ê°’ í•˜ë‚˜ì˜ í•´ì‹œì½”ë“œë¡œ ì´ˆê¸°í™”í•œë‹¤.
     - ê¸°ë³¸ íƒ€ì… í•„ë“œë¼ë©´, `Type.hashCode(f)`ë¥¼ ìˆ˜í–‰í•œë‹¤. Type : í•´ë‹¹ ê¸°ë³¸íƒ€ì…ì˜ ë°•ì‹± í´ë˜ìŠ¤
     - ì°¸ì¡° í•„ë“œì¼ ê²½ìš° `hashCode`ë¥¼ ì¬ê·€ì ìœ¼ë¡œ í˜¸ì¶œí•˜ê²Œëœë‹¤.  
      ê³„ì‚°ì´ ë§ì´ ë³µì¡í•´ì§ˆ ê²ƒ ê°™ìœ¼ë©´ í•„ë“œì˜ í‘œì¤€í˜•ì„ ë§Œë“¤ì–´ í‘œì¥°í˜•ì˜ `hashCode`ë¥¼ í˜¸ì¶œí•œë‹¤.   
      `null`ì¼ ê²½ìš° 0ì„ ì‚¬ìš©í•˜ë©´ëœë‹¤.
     - ë°°ì—´ì´ë¼ë©´ í•µì‹¬ ì›ì†Œ ê°ê°ì„ ë³„ë„ í•„ë“œì²˜ëŸ¼ ë‹¤ë£¬ë‹¤.  
      ë§Œì•½ ì›ì†Œê°€ í•µì‹¬ ì›ì†Œë¼ë©´ `Array.hashCode` ë¥¼ ì‚¬ìš©í•œë‹¤.  
      í•µì‹¬ì›ì†Œê°€ í•˜ë‚˜ë„ ì—†ë‹¤ë©´ ì‚°ìˆœíˆ ìƒìˆ˜(0)ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.
  2. ë‹¤ë¥¸ í•µì‹¬ í•„ë“œë“¤ë„ 1ë²ˆê³¼ ë™ì¼í•˜ê²Œ í•´ì‹œì½”ë“œí™”í•˜ì—¬ ì§€ì—­ë²ˆìˆ˜ì— í•©ì¹œë‹¤.
     ```java
     result = 31 * result(ì§€ì—­ë³€ìˆ˜) + c(í•µì‹¬í•„ë“œ í•´ì‹œì½”ë“œ)
     ```
  3. ì§€ì—­ë³€ìˆ˜ì˜ ê°’ì„ ë°˜í™˜í•œë‹¤.
```java
// 69p êµ¬í˜„
@Override 
public int hashCode() {

    int result = prefix.hashCode();
    result = 31 * result + middle.hashCode();
    result = 31 * result + suffix.hashCode();
    hashCode = result;

    return result;
}
```

<details>
<summary>ì™œ 31ì¼ê¹Œ?</summary>
  <div markdown="1">
    
    31ì´ í™€ìˆ˜ì´ë©´ì„œ ì†Œìˆ˜ì´ê¸° ë•Œë¬¸ì´ë‹¤.  
    ì§ìˆ˜ì¸ê²½ìš° ë§Œì•½ ì˜¤ë²„í”Œë¡œê°€ ë°œìƒí•˜ë©´ ì •ë³´ë¥¼ ìƒê²Œë˜ê¸°ë•Œë¬¸ì´ë‹¤.(2ë¥¼ ê³±í•˜ëŠ”ê±´ ì‹œí”„íŠ¸ ì—°ì‚°ê³¼ ê°™ê¸°ë•Œë¬¸)
    
  </div>
</details>

```java
@Test
@DisplayName("í•´ì‹œì½”ë“œë¥¼ ë§Œë“¤ì–´ë³´ì.")
void í•´ì‰¬ì½”ë“œ_ì¡°íšŒ() {
    PhoneNumber phoneNumber1 = new PhoneNumber("1234", "4567", "8910");
    PhoneNumber phoneNumber2 = new PhoneNumber("1234", "4567", "8910");
    PhoneNumber phoneNumber3 = new PhoneNumber("1452", "1232", "6122");

    assertEquals(phoneNumber1.hashCode(), phoneNumber2.hashCode()); // true
    assertEquals(phoneNumber1.hashCode(), phoneNumber3.hashCode()); // false 
}
```
![image](https://user-images.githubusercontent.com/53300830/164177283-0b54ce93-07ec-4f6a-a7bf-101584eccdbb.png)

> ì´ì „ì— í–ˆë˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ë³¸ ê²°ê³¼ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
<hr/>

### âœ… Object í´ë˜ìŠ¤ì˜ hashë©”ì„œë“œ ì‚¬ìš©
> ì†ë„ê°€ ëŠë¦¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.
```java
@Override 
public int hashCode() {
    return Objects.hash(prefix, middle, suffix);
}
```

### âœ… ì§€ì—°ì´ˆê¸°í™” ì „ëµì„ ê³ ë ¤í•˜ë¼.
> ê°ì²´ê°€ í‚¤ë¡œ ì‚¬ìš©ë  í™•ë¥ ì´ ë†’ë‹¤ë©´ ìƒì„±í•  ë•Œ ë¯¸ë¦¬ ìºì‹±í•´ë‘ëŠ”ê²Œ ì¢‹ë‹¤.  
> í•˜ì§€ë§Œ ê·¸ëŸ° ê²½ìš°ê°€ ì•„ë‹ê²½ìš° ë©”ëª¨ë¦¬ë‚­ë¹„ì´ë‹¤. ê·¸ëŸ´ë•Œ ì‚¬ìš©í•˜ëŠ” ì „ëµì´ ì§€ì—° ì´ˆê¸°í™”ì´ë‹¤.

```java
@Override public int hashCode() {
    if (hashCode != 0) {
        return hashCode;
    }
    int result = prefix.hashCode();
    result = 31 * result + middle.hashCode();
    result = 31 * result + suffix.hashCode();
    hashCode = result;

    return result;
}
```

### âœï¸ ì •ë¦¬
    eqaulsë¥¼ ì¬ì •ì˜í• êº¼ë©´ hashCodeë„ ê¼­ ê°™ì´ ì¬ì •ì˜í•´ì•¼ í•œë‹¤.   
    Lombokê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ìë™ìœ¼ë¡œ ì œê³µí•´ì£¼ê¸°ë„ í•œë‹¤.


## ì•„ì´í…œ 12. toStringì„ í•­ìƒ ì¬ì •ì˜í•˜ë¼.
### â“ ì™œ? í•­ìƒ 'ì¬ì •ì˜' í•´ì•¼ í•˜ëŠ” ê±¸ê¹Œ?
> ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” 'toString'ì´ ì¡´ì¬í•˜ì§€ë§Œ ì•„ë˜ ì˜ˆì‹œë¥¼ ì½ì–´ë³´ë©´ ì™œ ì¬ì •ì˜ í•´ì•¼ í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.  
> ìœ„ì˜ ì•„ì´í…œ11. ì˜ˆì œë¥¼ ì´ì–´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.


```java
class PhoneNumberTest {
    @Test
    @DisplayName("toStrigì„ ì¬ì •ì˜ í•˜ê¸° ì „.")
    void toString_ì¬ì •ì˜_ì „() {
        PhoneNumber phoneNumber1 = new PhoneNumber("1234", "4567", "8910");
        System.out.println(phoneNumber1.toString());
    }
}
```
<img width="477" alt="image" src="https://user-images.githubusercontent.com/53300830/164389927-046d9a24-ce2f-48dc-89c3-b68323948ad7.png">
> ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” 'toString'ì€ ìš°ë¦¬ê°€ ë³´ê¸° í˜ë“  `í´ë˜ìŠ¤ëª… + í•´ì‹œì½”ë“œ` ë¡œ ë°˜í™˜ëœë‹¤.  

<hr/>

### âœ… toStringì„ ì˜ êµ¬í˜„í•œ ê²½ìš°
#### 1. ì‚¬ìš©ì ì…ì¥ì—ì„œ í˜¸ì¶œëœ ê°ì²´ì˜ ì •ë³´ë“¤ì„ í•œ ëˆˆì— ë³¼ ìˆ˜ ìˆë‹¤.
  `item11.PhoneNumber@5985ffe0` ï¹¥ `PhoneNumber{hashCode=0, prefix='1234', middle='4567', suffix='8910'}`

#### 2. ë””ë²„ê¹…í•˜ê¸°ê°€ ì‰½ë‹¤.
  <img width="313" alt="image" src="https://user-images.githubusercontent.com/53300830/164391026-ab2aba65-2426-420f-ac95-04544c7cc749.png">
  <img width="779" alt="image" src="https://user-images.githubusercontent.com/53300830/164391218-2347e058-3a23-4736-af33-b1867633a6f9.png">


```java
// ì•„ì´í…œ 11 ì—°ì¥ì„ 
     /**
     * ì „í™”ë²ˆí˜¸ì˜ ë¬¸ìì—´ í‘œí˜„ì„ ë°˜í™˜í•œë‹¤.
     * ì´ ë¬¸ìì—´ì€ "XXX-YYYY-ZZZZ" í˜•íƒœì˜ 12ê¸€ìë‹¤.
     * XXXëŠ” í†µì‹ ì‚¬ ì‹ë³„ë²ˆí˜¸, YYYYëŠ” ì¼ë ¨ë²ˆí˜¸ ì•ìë¦¬, ZZZZëŠ” ì¼ë ¨ë²ˆí˜¸ ë’·ìë¦¬ì´ë‹¤.
     * ê°ê°ì˜ ëŒ€ë¬¸ìëŠ” 10ì§„ìˆ˜ ìˆ«ì í•˜ë‚˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
     *
     * ì „í™”ë²ˆí˜¸ì˜ ê° ë¶€ë¶„ì´ ê°’ì´ ë„ˆë¬´ ì‘ì•„ ìë¦¿ìˆ˜ë¥¼ ì±„ìš¸ ìˆ˜ ì—†ëŠ” ê²½ìš°,
     * ì•ì—ì„œë¶€í„° 0ìœ¼ë¡œ ì±„ì›Œë‚˜ê°„ë‹¤.(ex: 123 -> 0123)
     * @return
     */
    /*@Override
    public String toString() {
        return String.format("%03d-%03d-%04d", prefix, middle, suffix);
    }*/


    /**
     * ì „í™”ë²ˆí˜¸ ì •ë³´ë¥¼ ë°˜í™˜í•œë‹¤.
     * ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¥¼ í¬í•¨í•œë‹¤.
     * "[í†µì‹ ì‚¬ ì‹ë³„ë²ˆí˜¸: 010, ì¼ë ¨ë²ˆí˜¸ ì•ìë¦¬: 1234, ì¼ë ¨ë²ˆí˜¸ ë’·ìë¦¬: 5678]"
     * @return
     */
    @Override
    public String toString() {
        return "PhoneNumber{" +
                "hashCode=" + hashCode +
                ", prefix='" + prefix + '\'' +
                ", middle='" + middle + '\'' +
                ", suffix='" + suffix + '\'' +
                '}';
    }
```
<img width="781" alt="image" src="https://user-images.githubusercontent.com/53300830/164391621-0d6cdc40-3618-4685-868d-751188c4c378.png">
> ë§Œì•½ ì˜¤ë¥˜ê°€ ìƒê¸°ë”ë¼ë„ ë””ë²„ê¹…í•˜ê¸° í¸í•˜ë‹¤.


## ì•„ì´í…œ 13. clone ì¬ì •ì˜ëŠ” ì£¼ì˜í•˜ì—¬ ì§„í–‰í•˜ë¼.
> ë³µì œí•´ë„ ë˜ëŠ” í´ë˜ìŠ¤ì´ì„ ëª…ì‹œí•˜ëŠ” ë¯¹ìŠ¤ì¸ ì¸í„°í˜ì´ìŠ¤(mixin interface)

- ê°ì²´ë¥¼ ë³µì‚¬í•˜ê³  ì‹¶ë‹¤ë©´ `Cloneable` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ `clone` ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ëŠ” ë°©ë²•ì´ ì¼ë°˜ì ì´ë‹¤.  
- `Cloneable` ì¸í„°í˜ì´ìŠ¤ëŠ” ë¹„ì–´ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ë”°ë¼ì„œ `Cloneable` ë¥¼ êµ¬í˜„í–ˆë‹¤ê³  í•´ì„œ `clone()` ì„ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.
```java
// ì•„ì´í…œ 11 PhoneNumber ì½”ë“œì˜ ì—°ì¥ì„ 
// ê°€ë³€ìƒíƒœë¥¼ ì°¸ì¡°í•˜ëŠ” í´ë˜ìŠ¤ìš© clone
@Override
public Object clone() throws CloneNotSupportedException {
    try {
        return super.clone();
    } catch (CloneNotSupportedException e) {
        throw new AssertionError("clone ì˜¤ë¥˜ ë°œìƒ");

    }
}

@Test
@DisplayName("phoneNumber clone í…ŒìŠ¤íŠ¸")
void phoneNumber_clone_í…ŒìŠ¤íŠ¸() throws AssertionError {

    PhoneNumber phoneNumber = new PhoneNumber("100", "200", "300");

    AssertionError assertionError = assertThrows(AssertionError.class, () ->
            phoneNumber.clone());
    assertEquals("clone ì˜¤ë¥˜ ë°œìƒ", assertionError.getMessage());
}
```
![image](https://user-images.githubusercontent.com/53300830/164582154-576e22d6-cd87-4bcc-bec5-c7ce874d34b6.png)
> clone ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ê³  ì‚¬ìš©í–ˆì°Œë§Œ Cloneableë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•˜ê¸°ì— ì˜ˆì™¸ê°€ ë°œìƒí•©ë‹ˆë‹¤.

### âœ… clone ë©”ì„œë“œì˜ ê·œì•½
1. x.clone() != x // ë³µì‚¬í•œ ê°ì²´ëŠ” ì›ë³¸ ê°ì²´ì™€ ë…ë¦½ì ì„.
2. x.clone().getClass() == x.getClass(); // ë³µì‚¬í•œ ê°ì²´ì™€ ì›ë³¸ ê°ì²´ëŠ” ê°™ì€ í´ë˜ìŠ¤ì„.
3. x.clone().equals(x)

### â›”ï¸ clone ë©”ì„œë“œ ê·œì•½ì˜ ë¬¸ì œì 
`clone()` ë©”ì„œë“œì˜ ë°˜í™˜ê°’ì´ ë³µì‚¬ë  ê°ì²´ë¥¼ ê°€ë¥´í‚¤ê¸°ì— ìƒì„±ì ì—°ì‡„ì™€ ìœ ì‚¬í•˜ë‹¤.  
ì¦‰ `clone()` ë‚´ë¶€ ë¡œì§ì´ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ ì–»ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•´ë„ ë¬¸ì œê°€ ì—†ë‹¤.  
í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ì˜ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ `super.clone()` ìœ¼ë¡œ í˜¸ì¶œí•  ë•Œ ìƒìœ„ ê°ì²´ì—ì„œ ì˜ëª»ëœ í´ë˜ìŠ¤ê°€ ìƒì„±ë  ìˆ˜ ìˆê¸°ì— ìœ„í—˜í•˜ë‹¤.

```java
public class PhoneNumber implements Cloneable {
    /**
    *ìƒëµ
    */
    @Override
    public Object clone() throws CloneNotSupportedException {
        try {
            return super.clone();
        } catch (CloneNotSupportedException e) {
            throw new AssertionError("clone ì˜¤ë¥˜ ë°œìƒ"); // ì¼ì–´ë‚ ìˆ˜ê°€ ì—†ê²Œ ëœë‹¤.
        }
    }
}

@Test
@DisplayName("phoneNumber ê°œì„  í›„ ê²°ê³¼")
void phoneNumber_clone_ê°œì„ í›„_í…ŒìŠ¤íŠ¸() throws CloneNotSupportedException {
    phoneNumber.clone();
}
```
![image](https://user-images.githubusercontent.com/53300830/164582685-f4ea6c97-20ce-4db6-a730-7a64758244a2.png)
> í•„ë“œê°€ ëª¨ë‘ ê¸°ë³¸íƒ€ì…ì¼ ê²½ìš° cloneë©”ì„œë“œì—ì„œ super.clone() í˜¸ì¶œë§Œìœ¼ë¡œë„ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•œë‹¤.  
> í•˜ì§€ë§Œ ê°€ë³€ ê°ì²´ë¥¼ ì ì¡°í•˜ëŠ” í´ë˜ìŠ¤ì˜ cloneì„ ì¬ì •ì˜í• ë•Œ ì´ë ‡ê²Œ í•  ê²½ìš° ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

<hr/>

### â›”ï¸ ì¬ê·€ì  í˜¸ì¶œì˜ í•œê³„
```java
// ì•„ì´í…œ 7 Stack ì½”ë“œ ì—°ì¥ì„ 
@ToString // í¸ì˜ì„±ì„ ìœ„í•œ lombok ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
public class CloneStack implements Cloneable{
  /**
  * ì½”ë“œ ìƒëµ
  */
    @Override
    protected Object clone() throws CloneNotSupportedException {
        return super.clone();
    }
}
```

```java
@Test
@DisplayName("stack clone í…ŒìŠ¤íŠ¸")
void stack_clone_í…ŒìŠ¤íŠ¸() throws CloneNotSupportedException {
    CloneStack stack = new CloneStack();
    stack.push(1);

    CloneStack cloneStack = (CloneStack) stack.clone();
    cloneStack.push(3);
}
```
![image](https://user-images.githubusercontent.com/53300830/164586837-252e98b3-673f-459d-bfe6-e341f450bb7d.png)
> ë¶„ëª… cloneStackì—ë§Œ pushí•´ì£¼ì—ˆì§€ë§Œ ê²°ê³¼ëŠ” stackì—ë„ ì¶”ê°€ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì½”ë“œ ìˆ˜ì •
```java
@Override
protected Object clone() throws CloneNotSupportedException {
    try {
        CloneStack result = (CloneStack) super.clone();
        result.elements = elements.clone();
        return result;
    } catch (CloneNotSupportedException e) {
        throw new AssertionError();
    }
}
```
> super.clone()ë§Œ ë‹¨ìˆœíˆ í˜¸ì¶œí•œ ê²ƒì´ ì•„ë‹ˆë¼ ë‚´ë¶€ì˜ ë ˆí¼ëŸ°ìŠ¤ íƒ€ì…ì¸ elements ë˜í•œ cloneë©”ì„œë“œë¡œ í˜¸ì¶œ í•˜ëŠ” ê²ƒìœ¼ë¡œ í•´ê²°ì´ ëë‹¤.  
![image](https://user-images.githubusercontent.com/53300830/164586594-e0c25a37-f4ab-4a32-a882-d7829e9b9adc.png)

### âœ… clone() ì¬ê·€ í˜¸ì¶œë¡œ í•´ê²°ì´ ì•ˆëœë‹¤ë©´ DeepCopyë¥¼ ì´ìš©í•´ë³´ì.
> ë°°ì—´ ì•ˆì— ê°€ë³€ ì°¸ì¡° ê°ì²´ê°€ ìˆë‹¤ë©´ DeepCopyë¥¼ í•˜ëŠ”ê²Œ ì˜³ë‹¤.

```java
public class CustomHashTable implements Cloneable {
    private Entry[] buckets = new Entry[16];
    private static class Entry {
        final Object key;
        Object value;
        Entry next;

        public Entry(Object key, Object value, Entry next) {
            this.key = key;
            this.value = value;
            this.next = next;
        }

        public Entry deepCopy() {
            return new Entry(key, value, next == null ? null : next.deepCopy()); // ì—”íŠ¸ë¦¬ê°€ ê°€ë¥´í‚¤ëŠ” ì—°ê²°ë¦¬ìŠ¤íŠ¸ ë…¸ë“œë¥¼ ì¬ê·€ì ìœ¼ë¡œ ë³µì‚¬í•œë‹¤.
        }
    }

    @Override
    public CustomHashTable clone() {
        try {
            CustomHashTable result = (CustomHashTable) super.clone();
            result.buckets = new Entry[buckets.length];

            for (int i = 0; i < buckets.length; i++) {
                if (buckets[i] != null)
                    result.buckets[i] = buckets[i].deepCopy();
            }

            return result;
        } catch (final CloneNotSupportedException e) {
            throw new AssertionError();
        }
    }
}
```
> ë¦¬ìŠ¤íŠ¸ì˜ ì›ì†Œ ìˆ«ìë§Œí¼ ìŠ¤íƒ í”„ë ˆì„ì„ ë‚­ë¹„í•˜ê¸°ì— ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš° ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
```java
// í•´ê²° ì½”ë“œ
public Entry deepCopy() {
    Entry result = new Entry(key, value, next);
    for (Entry p = result; p.next != null; p = p.next) {
        p.next = new Entry(p.next.key, p.next.value, p.next.next);
    }
    return result;
}
```

### ğŸ“‹ ê²°ë¡ 
    1. í´ë˜ìŠ¤ë¥¼ ìƒˆë¡œ ë§Œë“¤ë•ŒëŠ” Cloneableì„ í™•ì¥í•˜ì§€ ë§ì
    2. ì˜¤ì§ ë°°ì—´ë§Œì´ clone ë©”ì„œë“œ ë°©ì‹ì˜ ì‚¬ìš©ì´ ê¶Œì¥ëœë‹¤.

## ì•„ì´í…œ 14. Comparableë¥¼ êµ¬í˜„í• ì§€ ê³ ë ¤í•˜ë¼.



















