## 4ì¥ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤

## ì•„ì´í…œ 15. í´ë˜ìŠ¤ì™€ ë©¤ë²„ì˜ ì ‘ê·¼ ê¶Œí•œì„ ìµœì†Œí™”í•´ë¼.

### â“ ì˜ ì„¤ê³„ëœ ì»´í¬ë„ŒíŠ¸ë€?
- ìº¡ìŠí™”ê°€ ì–¼ë§ˆë‚˜ ì˜ ë¼ìˆëŠ”ì§€ (ê¼­ í•„ìš”í•œ ì •ë³´ë“¤ë§Œ ê³µê°œë¥¼ í–ˆëŠ”ê°€)
- êµ¬í˜„ê³¼ APIë¥¼ ë¶„ë¦¬í–ˆëŠ”ê°€
> ì´ëŸ¬í•œ ê°œë…ì„ ì •ë³´ì€ë‹‰, ìº¡ìŠí™” ë¼ê³  í•œë‹¤.

### âœ… ì •ë³´ì€ë‹‰(ìº¡ìŠí™”) ì˜ ì¥ì 
> ì»´í¬ë„ŒíŠ¸ë¥¼ ì„œë¡œ ë…ë¦½ì‹œì¼œ ê°œë°œ, í…ŒìŠ¤íŠ¸, ìµœì í™”, ì ìš©, ë¶„ì„, ìˆ˜ì •ì„ ê°œë³„ì ìœ¼ë¡œ í•  ìˆ˜ ìˆê²Œ í•˜ëŠ”ê²ƒê³¼ ì—°ê´€ë¼ìˆë‹¤.
  1. **ì‹œìŠ¤í…œ ê°œë°œ ì†ë„ë¥¼ ë†’íŒë‹¤.**    -> ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë¥¼ **ë³‘ë ¬**ë¡œ ê°œë°œ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸
  2. **ì‹œìŠ¤í…œ ê´€ë¦¬ ë¹„ìš©ì„ ë‚®ì¶˜ë‹¤. (ì»´í¬ë„ŒíŠ¸ êµì²´ ë¹„ìš© ì ˆê°)**    -> ì»´í¬ë„ŒíŠ¸ ì´í•´ë„ê°€ ë†’ì•„ì ¸ ë””ë²„ê¹…í•  ìˆ˜ ìˆê³ , êµì²´ ë¶€ë‹´ë„ ì ê¸°ë•Œë¬¸
  3. **ì„±ëŠ¥ ìµœì í™”ì— ë„ì›€ì„ ì¤€ë‹¤.**    -> ìµœì í™”í•  ì»´í¬ë„ŒíŠ¸ë¥¼ ì •í•˜ê³  ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì— ì˜í–¥ì„ ì£¼ì§€ì•ŠëŠ” ê²ƒë§Œìœ¼ë¡œë„ ìµœì í™”ê°€ ë  ìˆ˜ ìˆë‹¤.
  4. **ì†Œí”„íŠ¸ì›¨ì–´ ì¬ì‚¬ìš©ì„±ì„ ë†’íŒë‹¤.**  -> ì™¸ë¶€ì— ì¡´ì¬í•˜ì§€ ì•Šê³  ë…ìì ìœ¼ë¡œ ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ë¥¸ ì‹œìŠ¤í…œì—ì„œë„ ë°”ë¡œ ì ìš©ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
  5. **ì œì‘í•˜ëŠ” ë‚œì´ë„ë¥¼ ë‚®ì¶°ì¤€ë‹¤.**   -> ê°œë³„ ì»´í¬ë„ŒíŠ¸ì˜ ë™ì‘ì„ ê²€ì¦í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

<hr/>

### âœ… ìë°”ì˜ ì •ë³´ ì€ë‹‰ì„ ìœ„í•œ ì¥ì¹˜
|                 | í•´ë‹¹ í´ë˜ìŠ¤ ì•ˆì—ì„œ ì ‘ê·¼ ê°€ëŠ¥ | ê°™ì€ íŒ¨í‚¤ì§€ ì•ˆì—ì„œ ì ‘ê·¼ ê°€ëŠ¥ | ìƒì†ë°›ì€ í´ë˜ìŠ¤ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥ | ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥ |
| --------------- | ----------------------------- | ----------------------------- | ------------------------------ | ------------------- |
| public          | O                             | O                             | O                              | O                   |
| protected       | O                             | O                             | O                              | X                   |
| package-private | O                             | O                             | X                              | X                   |
| private         | O                             | X                             | X                              | X                   |

ì ‘ê·¼ì„± : private -> package-private(default) -> protected -> public
> ê¸°ë³¸ ì›ì¹™ì€ ëª¨ë“  í´ë˜ìŠ¤ì™€ ë©¤ë²„ì˜ ì ‘ê·¼ì„±ì„ ê°€ëŠ¥í•œ ì¢íˆëŠ” ê²ƒì´ë‹¤.

### â›”ï¸ public í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ í•„ë“œëŠ” ë˜ë„ë¡ publicì´ ë˜ì„œëŠ” ì•ˆë˜ëŠ” ì´ìœ 
  1. **ë³€ê²½ì— ë§¤ìš° ì·¨ì•½í•˜ë‹¤.**
  2. í•„ë“œê°€ ìˆ˜ì •ë  ë•Œ ë§‰ì„ ìˆ˜ ì—†ê¸°ì— public ê°€ë³€í•„ë“œë¥¼ ê°–ëŠ” í´ë˜ìŠ¤ëŠ” **ìŠ¤ë ˆë“œ ì•ˆì „í•˜ì§€ ì•Šë‹¤.**
  3. finalì´ë©´ì„œ ë¶ˆë³€ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ë”ë¼ë„ ë‚´ë¶€ êµ¬í˜„ì„ ë°”ê¾¸ì§€ ëª»í•˜ê¸°ì— **public finalì˜ ë¬¸ì œì **ì´ ìˆë‹¤.### 

#### í•´ê²°ì±…
- ì ‘ê·¼ ì œì–´ìë¥¼ privateë¡œ ë§Œë“¤ê³  public ë¶ˆë³€ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
  ```java
  private static final Thing[] PRIVATE_VALUES = { ... };
  public static final List<Thing> VALUES = 
      Collections.unmodifiableList(Arrays.asList(PRIVATE_VALUES));
  ```
- ë°°ì—´ì„ privateë¡œ ë§Œë“¤ê³  ë³µì‚¬ë³¸ì„ ë°˜í™˜í•˜ëŠ” publicë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ë²• (ë°©ì–´ì  ë³µì‚¬)
  ```java
  private static final Thing[] PRIVATE_VALUES = { ... };
  public static final Thing[] values() {
      return PRIVATE_VALUES.clone();
  }
  ```
  
## ì•„ì´í…œ 16. public í´ë˜ìŠ¤ì—ì„œëŠ” public í•„ë“œê°€ ì•„ë‹Œ ì ‘ê·¼ì ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë¼.
```java
class Point {
	public double x;
	public double y;
}
```
> ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” Point í´ë˜ìŠ¤ì´ë‹¤. í•˜ì§€ë§Œ ë°ì´í„° í•„ë“œì— ì§ì ‘ ì ‘ê·¼ í•  ìˆ˜ ìˆìœ¼ë‹ˆ ìº¡ìŠí™”(ì •ë³´ì€ë‹‰)ì˜ ì´ì ì„ ì œê³µí•˜ì§€ ëª»í•œë‹¤.

```java
public class Point {
    private double x;
    private double y;

    public Point(double x, double y) {
        this.x = x;
        this.y = y;
    }

    public double getX() { return x; }

    public void setX(double x) { this.x = x; }

    public double getY() { return y; }

    public void setY(double y) { this.y = y; }
}
```
> Getterì™€ Setter ë©”ì„œë“œë¥¼ í™œìš©í•´ ë°ì´í„° ìº¡ìŠí™”

## ì•„ì´í…œ 17. ë³€ê²½ ê°€ëŠ¥ì„±ì„ ìµœì†Œí™”í•˜ë¼

### âœ… ë¶ˆë³€ í´ë˜ìŠ¤
#### ë¶ˆë³€ì´ë¼ëŠ” ê°œë…ì„ í´ë˜ìŠ¤ì— ì ìš©í•˜ë ¤ë©´ ê·¸ í´ë˜ìŠ¤ ì •ë³´ë¡œ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ì˜ ë‚´ë¶€ ê°’ë“¤ì€ ìƒì„± í›„ì—ëŠ” ìˆ˜ì •í•  ìˆ˜ ì—†ì–´ì•¼í•œë‹¤.

### ğŸ“‹ ë¶ˆë³€ í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ” ê·œì¹™
1. ê°ì²´ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
	- setter ë©”ì„œë“œì²˜ëŸ¼ í•„ë“œë¥¼ ìˆ˜ì •í•´ì„œëŠ” ì•ˆëœë‹¤.
2. í´ìƒˆë¥´ë¥´ í™•ì¥í•  ìˆ˜ ì—†ë„ë¡ í•œë‹¤.
	- ì˜ë„ì¹˜ ì•Šì€ ê°ì²´ì˜ ìƒíƒœ ë³€ê²½ì„ ë§‰ì•„ì•¼í•œë‹¤.
3. ëª¨ë“  í•„ë“œë¥¼ finalë¡œ ì„ ì–¸í•œë‹¤.
 	- ì‘ì„±ìì˜ ì˜ë„ë¥¼ ëª…í™•í•˜ê²Œ ë“œëŸ¬ë‚¸ë‹¤. 
	- ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ë¬¸ì œ ì—†ì´ ë™ì‘í•˜ê²Œ ë³´ì¥í•˜ëŠ”ë° í•„ìš”í•˜ë‹¤.
4. ëª¨ë“  í•„ë“œë¥¼ privateë¡œ ì„ ì–¸í•œë‹¤.
	- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§ì ‘ ë©¤ë²„ì— ì ‘ê·¼í•˜ì—¬ ìˆ˜ì •í•˜ëŠ” ì¼ì„ ë§‰ì•„ì¤€ë‹¤.
5. ìì‹ ì™¸ì—ëŠ” ë‚´ë¶€ì˜ ê°€ë³€ ì»´í¬ë„ŒíŠ¸ì— ì ‘ê·¼ í•  ìˆ˜ ì—†ë„ë¡ í•œë‹¤.
	- í´ë˜ìŠ¤ì—ì„œ ê°€ë³€ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” í•„ë“œê°€ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ê·¸ ê°ì²´ì˜ ì°¸ì¡°ë¥¼ ëª»í•˜ë„ë¡ í•´ì•¼í•œë‹¤.
	- ì ‘ê·¼ì ë©”ì„œë“œê°€ ê·¸ í•„ë“œë¥¼ ê·¸ë˜ë„ ë°˜í™˜í•´ì„œë„ ì•ˆëœë‹¤.

```java
public class Member {

    private final Long id;
    private final String name;
    private final Address address;

    public Member(Long id, String name, Address address) {
        this.id = id;
        this.name = name;
        this.address = address;
    }

    public Long getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public Address getAddress() {
        return address;
    }
}
```

```java
public class Address {

    private String post;

    public String getPost() {
        return post;
    }

    public void setPost(String post) {
        this.post = post;
    }
}
```
```java
class MemberTest {
    @Test
    @DisplayName("ë¶ˆë³€ ê°ì²´ í…ŒìŠ¤íŠ¸")
    void ë¶ˆê²¬ê°ì²´_í…ŒìŠ¤íŠ¸() {
        Address address = new Address();
        address.setPost("ìš©ì‚°");

        Member member = new Member(0L, "ì´ì§€í›ˆ", address);
        String YongSan = member.getAddress().getPost();

        address.setPost("ì„œìš¸");
        String seoul = member.getAddress().getPost();

        assertNotEquals(YongSan, seoul); // í†µê³¼ í•œë‹¤
    }
}
```
> ì¦‰ Address ê°ì²´ê°€ ë³€ê²½ë˜ë©´ Memberì˜ ê°ì²´ë„ ë³€ê²½ì´ ëœë‹¤ëŠ” ëœ»

```java
public class Address {

    private final String post;

    public Address(String post) {
        this.post = post;
    }

    public String getPost() {
        return post;
    }

}
```
```java
    public Member(Long id, String name, Address address) {
        this.id = id;
        this.name = name;
        this.post = new Address(address.getPost());
    }
```
> ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ìœ„ ì²˜ëŸ¼ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì„œ ì‚¬ìš©í•´ì•¼í•œë‹¤.

### âœ… ì¥ì ê³¼ ë‹¨ì    
#### ì¥ì  1. ë‹¨ìˆœí•˜ë‹¤.
	ì˜¤ë¥˜ê°€ ìƒê¸¸ ì—¬ì§€ê°€ ì ê³ , ë¶ˆë³€ì‹ì„ ìœ ì§€í•˜ê¸° ì‰½ë‹¤.
#### ì¥ì  2. ììœ ë¡­ê²Œ ê³µìœ í•  ìˆ˜ ìˆë‹¤.
	Thread-Safeë¥¼ ë³´ì¥í•œë‹¤. -> ë³€ê²½ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ì ‘ê·¼í•˜ë”ë¼ë„ í›¼ì†ë˜ì§€ ì•ŠëŠ”ë‹¤.
	ë°©ì–´ì  ë³µì‚¬ê°€ í•„ìš” ì—†ë‹¤. -> ë³µì‚¬ë¥¼ í•´ë„ ìˆ˜ì •ì„ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ê²°êµ­ ì›ë³¸ê°€ ê°™ì€ ìƒíƒœì´ë‹¤.
	ë¶ˆë³€ ê°ì²´ë¼ë¦¬ëŠ” ë‚´ë¶€ ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤. -> ê°€ë³€ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ë”ë¼ë„ ì ‘ê·¼/ë³€ê²½ì„ ë§‰ì•„ë‘” ìƒíƒœì´ê¸°ë•Œë¬¸ì— ê·¸ í•„ë“œëŠ” ë¶ˆë³€ì´ê¸° ë•Œë¬¸ì´ë‹¤.
#### ë‹¨ì  1. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì— ëŒ€í•œ ë¬¸ì œ	
	ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ë¹„ìš©ì´ í° ê²½ìš° ë¬¸ì œê°€ ëœë‹¤. 

#### í•´ê²°ë°©ë²• 1. ì¸ìŠ¤í„´ìŠ¤ ìºì‹±
	ì¸ìŠ¤í„´ìŠ¤ ìºì‹±ì„ í†µí•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì§€ ì•Šê³  ì¬ì‚¬ìš©í•˜ì—¬ ë¹„ìš©ì„ ì¤„ì¸ë‹¤.
	ìë°”ì˜ ëŒ€ë¶€ë¶„ì˜ ê¸°ë³¸ê°’ wrapperí´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©ë˜ê³  ìˆëŠ” ë°©ì‹ì´ë‹¤. (Boolean, Integer, String...)
#### í•´ê²°ë°©ë²• 2. ë‹¤ë‹¨ê³„ ì—°ì‚° ì˜ˆì¸¡í•˜ì—¬ ê¸°ë³¸ ê¸°ëŠ¥ìœ¼ë¡œ ì œê³µ
	ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ”ë° ì—¬ëŸ¬ ë‹¨ê³„ë¥¼ ê±°ì¹˜ëŠ”ë°, ì´ ë‹¨ê³„ë“¤ì„ ì˜ˆì¸¡í•˜ì—¬ ê¸°ëŠ¥ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê²ƒì„ ëœ»í•œë‹¤.
	ë¶ˆë³€ ê°ì²´ Stringì€ ê°€ë³€ ë™ë°˜ í´ë˜ìŠ¤ì¸ StringBuilderë¥¼ ì œê³µí•œë‹¤.
	StringBuilderì—ì„œëŠ” String ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì—¬ëŸ¬ ë‹¨ê³„ë¥¼ ìª¼ê°œì–´ ê°€ë³€ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
	
	
## ì•„ì´í…œ 18. ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ë¼.
### â“ ìƒì†ì´ë€? ê·¸ë¦¬ê³  ì™œ ì‚¬ìš©í• ê¹Œ?
ë‘ ê°œì˜ í´ë˜ìŠ¤ê°€ ìˆì„ ë•Œ ìƒìœ„/í•˜ìœ„ í´ë˜ìŠ¤ë¡œ ê´€ê³„ë¥¼ ë§ºëŠ” ë°©ë²•ì´ë‹¤.  
ì¦‰ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒìœ„ í´ë˜ìŠ¤ì˜ íŠ¹ì •ì„ ì¬ì‚¬ìš©í•˜ê³  í™•ì¥í•œë‹¤.  
í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ `extends` ë¥¼ ì´ìš©í•´ì„œ ìƒì†ê´€ê³„ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
```java
// í•˜ìœ„ í´ë˜ìŠ¤ : MarketRepositoryExtensionImpl
// ìƒìœ„ í´ë˜ìŠ¤ : QuerydslRepositorySupport
public class MarketRepositoryExtensionImpl extends QuerydslRepositorySupport
```
> ìƒì†(Inheritance)ì´ë¼ê³  í•˜ì§€ë§Œ ì—°ì¥/í™•ì¥(extends)ë¼ê³  í•˜ëŠ” ì´ìœ   
> ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ê³  ì¶”ê°€ë¡œ í™•ì¥ì˜ ê´€ì ê¹Œì§€ ë³¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ extendsê°€ ì¢€ ë” ì–´ìš¸ë¦°ë‹¤. 




### ìƒì†ì˜ ë‹¨ì 
ê°ì²´ë¥¼ ì¬ì‚¬ìš©í•˜ë©´ì„œ í™•ì¥ê¹Œì§€ ê³ ë ¤í•  ë•Œ ìƒì†ì€ ê½¤ë‚˜ í° ê±¸ë¦¼ëŒì´ ë  ìˆ˜ ìˆë‹¤.
> ì¦‰ ìƒì†ì€ ìº¡ìŠí™”ë¥¼ ê¹¨íŠ¸ë¦´ ìˆ˜ ìˆë‹¤.

```java
// ìƒìœ„ í´ë˜ìŠ¤ HashSet
// í•˜ìœ„ í´ë˜ìŠ¤ InstrumentedHashSet
public class InstrumentedHashSet<E> extends HashSet<E> {

    private int addCount = 0;

    public InstrumentedHashSet(int initCap, float loadFactor) {
        super(initCap, loadFactor);
    }

    @Override
    public boolean add(E e) {
        addCount++;
        return super.add(e);
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
        addCount += c.size();
        return super.addAll(c);
    }

    public int getAddCount() {
        return addCount;
    }
}
```
```java
class InstrumentedHashSetTest {

    @Test
    @DisplayName("ìƒì† í…ŒìŠ¤íŠ¸")
    void ìƒì†_í…ŒìŠ¤íŠ¸() {
        InstrumentedHashSet<String> objects = new InstrumentedHashSet<>(1, 2);

        objects.addAll(List.of("ê°€", "ë‚˜", "ë‹¤"));

        assertEquals(objects.getAddCount(), 3);
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/165884735-08bcbed6-c4a1-4858-93c7-d9dc50868be3.png)
> 3ì´ ì¶œë ¥ì´ ë¼ì•¼ í•˜ì§€ë§Œ 6ì´ ë°˜í™˜ëœë‹¤.

#### â“ ì™œ 6ì´ ë°˜í™˜ëœê±¸ê¹Œ?
	HashSet í´ë˜ìŠ¤ì˜ addAll ë©”ì„œë“œê°€ ë‚´ë¶€ì ìœ¼ë¡œ addë¥¼ êµ¬í˜„í•˜ëŠ”ë° ì›ì¸ì´ ìˆë‹¤.  
	addAllì— 3ê°œì˜ ì›ìê°€ ì¶”ê°€ ë˜ê³  ë¡œì§ ë‚´ë¶€ì— ìˆëŠ” addë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë¯€ë¡œ ê²°êµ­ ì¸ìë‹¹ 2íšŒì”© addAccountê°€ ëœê²ƒì´ë‹¤.
	
```java
    public boolean addAll(Collection<? extends E> c) {
        boolean modified = false;
        for (E e : c)
            if (add(e)) // add ê°€ ì¤‘ë³µìœ¼ë¡œ ì¼ì–´ë‚˜ê²Œ ëœë‹¤.
                modified = true;
        return modified;
    }
```
> í•´ê²°ë°©ë²• : addAllì„ ì¬ì •ì˜í•˜ì§€ ì•Šê±°ë‚˜ ë‹¤ë¥¸ ì‹ì˜ ì¬ì •ì˜ë¥¼ í†µí•´ í•´ê²°ì„ í•  ìˆ˜ ìˆë‹¤.

### âœ… ìƒì†ë³´ë‹¨ ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•´ë³´ì.
> ì»´í¬ì§€ì…˜ : ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ì§€ ì•Šê³ , ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë§Œë“  í›„, private í•„ë“œë¡œ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê²Œ í•˜ë„ë¡ ì„¤ê³„í•˜ëŠ” ë°©ë²•

#### â“ ì™œ ì‚¬ìš©í•˜ê³  ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ê±¸ê¹Œ?
ì¬ì •ì˜í•˜ëŠ” ì¼ì´ ì—†ì–´ ìœ„ì˜ ìƒì†ì²˜ëŸ¼ ë¬¸ì œê°€ ë  ì¼ì´ ì ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.

```java
public class CustomHashSetByComposition<E> {
    private final HashSet<E> hashSet;
    private int addCount = 0;

    public CustomHashSetByComposition(HashSet<E> hashSet) {
        this.hashSet = hashSet;
    }

    public boolean add(E e) {
        addCount++;
        return hashSet.add(e);
    }

    public boolean addAll(Collection<? extends E> c) {
        addCount += c.size();
        return hashSet.addAll(c);
    }

    public int getAddCount() {
        return addCount;
    }
}
```
```java
class CustomHashSetByCompositionTest {
    @Test
    @DisplayName("ì»´í¬ì§€ì…˜ í…ŒìŠ¤íŠ¸")
    void ì»´í¬ì§€ì…˜_í…ŒìŠ¤íŠ¸() {
        CustomHashSetByComposition<Object> custom = new CustomHashSetByComposition<>(new HashSet<>());

        custom.addAll(Arrays.asList(1, 2, 3, 4, 5, 6, 7));

        assertEquals(custom.getAddCount(), 7);
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/165886563-83fdb31b-a984-4292-92ba-9a890e9c48b6.png)

### ğŸ“‹ ì •ë¦¬
- ìƒì†ì€ ìº¡ìŠí™”ë¥¼ ê¹¨íŠ¸ë¦°ë‹¤.
- í•˜ìœ„ í´ë˜ìŠ¤ì˜ ê´€ê³„ê°€ ì˜¨ì „í•œ is-a ê´€ê³„ì¼ë•Œë§Œ ì‚¬ìš©í•´ì•¼í•œë‹¤.
- is-a ê´€ê³„ì¼ë•Œë„ í•˜ìœ„ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ê°€ ìƒìœ„ í´ë˜ìŠ¤ì™€ ë‹¤ë¥´ê³ , ìƒìœ„ í´ë˜ìŠ¤ê°€ í™•ì¥ì„ ê³ ë ¤í•˜ì§€ ì•Šì„ë•Œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
- ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì»´í¬ì§€ì…˜ê³¼ ì „ë‹¬ì„ ì‚¬ìš©í•˜ì. 

## ì•„ì´í…œ 19. ìƒì†ì„ ê³ ë ¤í•´ ì„¤ê³„í•˜ê³  ë¬¸ì„œí™”í•˜ë¼. ê·¸ë ‡ì§€ ì•Šì•˜ë‹¤ë©´ ìƒì†ì„ ê¸ˆì§€í•˜ë¼.
### â“ ìƒì†ì„ ê³ ë ¤í•œ ì„¤ê³„ë€?
ê¸°ëŠ¥í™•ì¥ ë° ì¬ì •ì˜ë¥¼ ì—¼ë‘í•´ë‘ê³  ë§Œë“œëŠ” ìƒì†ìš© í´ë˜ìŠ¤ë¥¼ ë§í•œë‹¤.  
ì¦‰ ì¬ì •ì˜í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ `ì–´ë–»ê²Œ(how)` ì´ìš©í•˜ëŠ”ì§€ ë¬¸ì„œë¡œ ë‚¨ê²¨ì•¼í•œë‹¤.

### âœ… ë¬¸ì„œ ì‘ì„± ë‚´ìš©
- ìƒì†ìš© í´ë˜ìŠ¤ëŠ” ì¬ì •ì˜í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œë“¤ì„ ë‚´ë¶€ì ìœ¼ë¡œ `ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€` ë¬¸ì„œë¡œ ë‚¨ê²¨ì•¼í•œë‹¤.
- í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œê°€ `ì¬ì •ì˜ ê°€ëŠ¥í•œ ë©”ì„œë“œ`(public/protected finalì´ ì•„ë‹Œê²ƒ)ë¼ë©´ ê·¸ ì‚¬ì‹¤ì„ í˜¸ì¶œí•˜ëŠ” ë©”ì„œë“œì˜ APIì„¤ëª…ì— ëª…ì‹œí•´ì•¼ í•œë‹¤.
- ì˜ˆì‹œë¡œ ì–´ë–¤ ìˆœì„œë¡œ í˜¸ì¶œí•˜ëŠ”ì§€, ê°ê°ì˜ í˜¸ì¶œ ê²°ê³¼ê°€ ì´ì–´ì§€ëŠ” ì²˜ë¦¬ì— ì–´ë–¤ ì˜í–¥ì„ ì£¼ëŠ”ì§€ ë“±ë“± `ëª¨ë“  ìƒí™©`ì„ ë¬¸ì„œë¡œ ë‚¨ê²¨ì•¼í•œë‹¤.
- ìƒì†ì´ ìº¡ìŠí™”ë¥¼ í•´ì¹˜ê¸° ë•Œë¬¸ì— í•´ì•¼í•˜ëŠ” ì‘ì—…ì´ë©°, í´ë˜ìŠ¤ë¥¼ ì•ˆì „í•˜ê²Œ ìƒì†í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´ `ë‚´ë¶€ êµ¬í˜„ ë°©ì‹`ì„ ì„¤ëª…í•´ì•¼ í•œë‹¤.  

### âœ… Hook
> í´ë˜ìŠ¤ ë‚´ë¶€ ë™ì‘ ê³¼ì •ì—ì„œ ë¼ì–´ë“¤ ìˆ˜ ìˆëŠ” í›…(hook)ì„ ì˜ ì„ ë³„í•´ì„œ protected ë©”ì„œë“œ í˜•íƒœë¡œ ê³µê°œí•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.  

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-04-29 á„‹á…©á„’á…® 3 26 46 1](https://user-images.githubusercontent.com/53300830/165894851-05b15c74-89ff-4e63-873b-9363f462baac.png)
> removeRange ë©”ì„œë“œë¥¼ í™œìš©í•˜ë©´ clear ë©”ì„œë“œì˜ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— List êµ¬í˜„ì²´ ë¬¸ì„œì— ì¡´ì¬í•˜ëŠ” ê²ƒì´ë‹¤.

ì—¬ê¸°ì„œ ì¤‘ìš”í•œì ì€ ì ‘ê·¼ì œí•œìê°€ `protected` ì¸ ê²ƒì´ë‹¤. ì¦‰ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•  ì¼ì´ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-04-29 á„‹á…©á„’á…® 3 38 21](https://user-images.githubusercontent.com/53300830/165895874-d1d06245-1bd6-4b12-ad5f-874f3e480181.png)
> removeRange()ê°€ ì—†ëŠ” ìƒíƒœì—ì„œ êµ¬í˜„í• ë ¤ë©´ ë¡œì§ì„ ì•„ì˜ˆ ë‹¤ì‹œ êµ¬í˜„í•´ì•¼ í•˜ë¯€ë¡œ ì¼ì„ ë‘ ë²ˆ í•˜ëŠ”ì…ˆì´ë‹¤. 

ì¶”ê°€ë¡œ ìœ„ ìŠ¤í¬ë¦°ìƒ·ì—ì„œ `@implSpec` ì€ ìë°” 9ë¶€í„° ë³¸ê²©ì ìœ¼ë¡œ ì‚¬ìš©í•œ íƒœê·¸ì´ë‹¤. 
[ìì„¸í•œ ì‚¬ìš©ë²•](https://jaehun2841.github.io/2019/02/24/effective-java-item56/#%EC%97%B4%EA%B1%B0%ED%83%80%EC%9E%85%EC%97%90%EB%8A%94-%EC%83%81%EC%88%98%EB%B3%84%EB%A1%9C-%EC%A3%BC%EC%84%9D%EC%9D%84-%EB%8B%AC%EC%95%84%EB%9D%BC)

### â›”ï¸ ì£¼ì˜ í•  ì  1. ìƒì†ìš© í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ ì¬ì •ì˜ ê°€ëŠ¥ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œëŠ” ì•ˆëœë‹¤. 
```java
public class Super {
    public Super() {
        overrideMe();
    }

    public void overrideMe() {
        System.out.println("Super override method!");
    }
}
```
```java
public class Sub extends Super{
    private final Instant instant;
    public Sub() {
        instant = Instant.now();
    }

    @Override
    public void overrideMe() {
        System.out.println("Sub overrideMe Method!! " + instant);
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/165897668-70983ecf-e04d-4162-b842-d8ff63165872.png)
> sub.overrideMe() ë©”ì„œë“œë¥¼ í•œ ë²ˆ í˜¸ì¶œí•œ ë’¤ ìƒì„±ìì—ì„œ instantí•„ë“œë¥¼ ì´ˆê¸°í™”ë§Œ í•´ì¤¬ì„ ë¿ì¸ë° ì¶œë ¥ì´ ë‘ë²ˆëìœ¼ë©°   
> ì²« ë²ˆì§¸ëŠ” null ê°’ì´ ë‚˜ì˜¨ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

#### â“ ì™œ ìœ„ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ê±¸ê¹Œ?
ìš°ì„ ì€ ìƒìœ„ í´ë˜ìŠ¤ì˜ ìƒì„±ìê°€ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ìƒì„±ìë³´ë‹¤ í•­ìƒ ë¨¼ì € í˜¸ì¶œëœë‹¤ëŠ” ì ì„ ë‹¤ì‹œ ìƒê¸°ì‹œì¼œì•¼í•©ë‹ˆë‹¤.
1. ë¶€ëª¨ í´ë˜ìŠ¤ì˜ `Superì˜ overrideMe()` ë©”ì„œë“œê°€ í˜¸ì¶œ ëœë‹¤ëŠ” ê²ƒì´ê³ 
2. ì‹¤ì œì ì¸ `overrideMe()` ëŠ” Sub í´ë˜ìŠ¤ì´ê¸° ë•Œë¬¸ì— `Subì˜ overrideMe()ê°€ í˜¸ì¶œ`ì´ ë©ë‹ˆë‹¤.
3. í•˜ì§€ë§Œ ì—¬ê¸°ì„œ instantê°€ ì´ˆê¸°í™” ì¦‰ ëª…ì‹œëœ ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— instantëŠ” null ê°’ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. 
> ë§Œì•½ instantì— ì§ì ‘ ì ‘ê·¼í• ë ¤ê³  í–ˆë‹¤ë©´ NullPointExceptionì„ ë˜ì§€ê²Œ ë©ë‹ˆë‹¤. 
> ì¶”ê°€ë¡œ private, final, static ë©”ì„œë“œëŠ” ì¬ì •ì˜ê°€ ë¶ˆê°€ëŠ¥í•˜ê¸°ì— ìƒì„±ìì—ì„œ í˜¸ì¶œí•´ë„ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.

### â›”ï¸ ì£¼ì˜ í•  ì  2. Cloneable, Serializable ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì„ ì£¼ì˜í•˜ë¼.
ì´ ë‘ ì¸í„°í˜ì´ìŠ¤ ì¤‘ í•˜ë‚˜ë¼ë„ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ìƒì†ìš© í´ë˜ìŠ¤ë¡œ ì„¤ê³„í•˜ê²Œ ë  ê²½ìš° `clone`, `readObject` ëª¨ë‘ ì§ì ‘ì ìœ¼ë¡œë“  ê°„ì ‘ì ìœ¼ë¡œë“  ì¬ì •ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œëŠ” ì•ˆëœë‹¤.
> ì¦‰ í´ë˜ìŠ¤ë¥¼ ìƒì†ìš©ìœ¼ë¡œ ì„¤ê³„í•˜ë ¤ë©´ ì—„ì²­ë‚œ ë…¸ë ¥ì´ í•„ìš”í•˜ê³  ê·¸ í´ë˜ìŠ¤ì— ì•ˆê¸°ëŠ” ì œì•½ë„ ìƒë‹¹í•˜ë‹¤.

### â›”ï¸ ì£¼ì˜ í•  ì  3. ìƒì†ìš©ì´ ì•„ë‹Œ ì¼ë°˜ êµ¬ì²´ í´ë˜ìŠ¤ëŠ” ìƒì†ì„ í•´ì„œëŠ” ì•ˆëœë‹¤.
finalë„ ì•„ë‹ˆê³  ìƒì†ìš©ìœ¼ë¡œ ì„¤ê³„ë˜ê±°ë‚˜ ë¬¸ì„œë„ ì—†ëŠ” ì¼ë°˜ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ê²Œë˜ë©´ í´ë˜ìŠ¤ê°€ ë³€ê²½ë ë•Œë§ˆë‹¤ í™•ì¥ í´ë˜ìŠ¤ë“¤ì—ì„œ ë¬¸ì œê°€ ìƒê¸¸ í™•ë¥ ì´ ë†’ë‹¤.
> í´ë˜ìŠ¤ë¥¼ finalë¡œ ì„ ì–¸í•˜ê±°ë‚˜ ëª¨ë“  ìƒì„±ìë¥¼ privateë¡œ ì„ ì–¸í•´ì„œ ì •ì  íŒ©í„°ë¦¬ë¥¼ ë§Œë“œëŠ”ê²Œ ì¢‹ë‹¤.

### ğŸ“‹ ê²°ë¡ 
- ìƒì†ìš© í´ë˜ìŠ¤ë¥¼ ì„¤ê³„í•˜ê¸°ë€ ì‰½ì§€ ì•Šì. í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ìŠ¤ìŠ¤ë¡œë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ëª¨ë‘ ë¬¸ì„œë¡œ ë‚¨ê²¨ì•¼í•œë‹¤.
- í´ë˜ìŠ¤ë¥¼ í™•ì¥í•´ì•¼ í•  ëª…í™•í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ ìƒì†ì„ ê¸ˆì§€í•˜ëŠ” ê²ƒì´ ë‚«ë‹¤. 
> í´ë˜ìŠ¤ë¥¼ finalë¡œ ì„ ì–¸í•˜ê±°ë‚˜ ìƒì„±ìë¥¼ ëª¨ë‘ privateë¡œ ì„ ì–¸í•´ì£¼ë©´ ëœë‹¤.


## ì•„ì´í…œ 20. ì¶”ìƒ í´ë˜ìŠ¤ ë³´ë‹¤ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ìš°ì„ í•˜ë¼
### â“ ì¶”ìƒ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ ì°¨ì´?
#### ë‹¤ì¤‘ ìƒì† ìœ ë¬´ ì°¨ì´ê°€ í¬ë‹¤.
	ë‹¤ì¤‘ìƒì†ì´ ì•ˆë˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ëŠ” í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” êµ¬í˜„ í´ë˜ìŠ¤ê°€ ë°˜ë“œì‹œ ì´ ì¶”ìƒ í´ë˜ìŠ¤ì˜ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ë¼ì•¼ í•œë‹¤. 
> ê°„ë‹¨íˆ ë§í•˜ìë©´ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì¶”ìƒ í´ë˜ìŠ¤ì— ì¢…ì†ë¼ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.  
> ê·¸ëŸ°ë° ì¢…ì†ì„±ì´ ìƒê¸°ë©´ í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ìƒˆë¡œìš´ íƒ€ì… ë° ê¸°ëŠ¥ì„ ì •ì˜í•˜ëŠ”ë° ì œì•½ì´ ë§ë‹¤.

### âœ… ì¸í„°í˜ì´ìŠ¤ì˜ ì¥ì  1. ê¸°ì¡´ í´ë˜ìŠ¤ì—ë„ ì†ì‰½ê²Œ ìƒˆë¡œìš´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ ë„£ì„ ìˆ˜ ìˆë‹¤.
```java
public interface Food {
    String getName();
}
```
```java
public class Apple implements Food, Comparable<Apple>{ // Foodê°€ ì¶”ìƒ í´ë˜ìŠ¤ì˜€ë‹¤ë©´, ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë¼ì›Œ ë„£ê¸°ê°€ ì–´ë µë‹¤.

    private final String name;
    private final long price;

    public Apple(String name, long price) {
        this.name = name;
        this.price = price;
    }

    @Override
    public String getName() {
        return null;
    }

    @Override
    public int compareTo(Apple o) {
        return 0;
    }
}
> Foodë¥¼ ì¸í„°í˜ì´ìŠ¤ë¡œ êµ¬í˜„í–ˆê¸° ë•Œë¬¸ì— Comparableì„ ë¼ì›Œë„£ê¸° ì‰½ë‹¤.
```
### âœ… ì¸í„°í˜ì´ìŠ¤ì˜ ì¥ì  2. ë¯¹ìŠ¤ì¸(mixin) ì •ì˜ì— ì•ˆì„±ë§ì¶¤ì´ë‹¤.
#### â“ ë¯¹ìŠ¤ì¸ì´ë€?
íŠ¹ì • í–‰ë™ì„ ì‹¤í–‰í•´ì£¼ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•˜ëŠ”ë° ë‹¨ë…ìœ¼ë¡œ ì“°ì´ì§€ ì•Šê³  `ë‹¤ë¥¸ í´ë˜ìŠ¤ì— í–‰ë™ì„ ë”í•´ì£¼ëŠ” ìš©ë„`ë¡œ ì‚¬ìš©ë¨  
ë‹¨ë… ì‚¬ìš©ì´ ì•„ë‹Œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— ì‚¬ìš©ë  ëª©ì ìœ¼ë¡œ ì‘ì„±ëœ ë¶€í’ˆ ê°™ì€ í´ë˜ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤.
> ì¦‰ ê°ê°ì˜ ê¸°ëŠ¥ì„ ì»´í¬ë„ŒíŠ¸ì²˜ëŸ¼ êµ¬í˜„í•˜ê³  ì›í•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ì¡°í•©í•˜ì—¬ ìƒˆë¡œìš´ íƒ€ì…ì„ ë§Œë“¤ ìˆ˜ ìˆìŒ

#### ìœ„ ì‘ì„±í•œ ì½”ë“œ ì¤‘ Apple í•˜ìœ„ í´ë˜ìŠ¤ì˜ Comparableì´ ë¯¹ìŠ¤ì¸ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.
> Apple í´ë˜ìŠ¤ê°€ Food íƒ€ì… ì™¸ì— ë¹„êµí•˜ì—¬ ì •ë ¬ì„ í•  ìˆ˜ ìˆë‹¤ê³  ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.  
> ì—¬ê¸°ì„œ Comparableì„ ë¶€í’ˆì²˜ëŸ¼ ë¼ì›Œë§ì¶° ë„£ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.

### âœ… ì¸í„°í˜ì´ìŠ¤ì˜ ì¥ì  3. ê³„ì¸µêµ¬ì¡°ê°€ ì—†ëŠ” íƒ€ì… í”„ë ˆì„ì›Œí¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
```java
public interface Singer { // ê°€ìˆ˜
    AudioClip sing(Song s);
}

public interface SongWriter { // ì‘ê³¡ê°€
    Song compose(int chartPosition);
}

// ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì•„ë˜ êµ¬ì¡°ë¥¼ ë§Œë“¤ ê²½ìš° ì¤‘ë³µëœ ì½”ë“œê°€ ë§ì•„ì ¸ ê°€ë…ì„±ì´ ì•ˆì¢‹ê²Œ ëœë‹¤ -> ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µë‹¤.
public interface SingerSongWriter extends Singer, SongWriter{ // ê°€ìˆ˜ì™€ ì‘ê³¡ê°€ê°€ ê°™ë‹¤ë©´?
    AudioClip strum();
    void actSensitive();
}
```
> `ê°€ìˆ˜(Singer)` `ì‘ê³¡ê°€(SongWriter)` ì¸í„°í˜ì´ìŠ¤ê°€ ê°ê° ì¡´ì¬í•œë‹¤.  
> í•˜ì§€ë§Œ ê°€ìˆ˜ê°€ ì‘ê³¡ì„ ê°™ì´ í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤(ì•…ë®¤) ê·¸ëŸ° ê²½ìš° `SingerSongWriter` ìƒˆë¡œìš´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜ í•´ì„œ ë§Œë“¤ë©´ ëœë‹¤.  
> ì´ë ‡ê²Œ ì¸í„°í˜ì´ìŠ¤ëŠ” ìœ ì—°ì„±ì´ ë†’ì•„ ê°œë°œìì˜ í¸ì˜ì„±ì„ ë•ëŠ”ë‹¤.

### âœ… ì¸í„°í˜ì´ìŠ¤ì˜ ì¥ì  4. ë˜í¼ í´ë˜ìŠ¤ì™€ ê°™ì´ ì“°ë©´ ê¸°ëŠ¥ í–¥ìƒì´ ì•ˆì „í•˜ê³  ê°•ë ¥í•˜ë‹¤.
ë˜í¼ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ ìƒì†ë³´ë‹¤ ì•ˆì „í•˜ê³  ê°•ë ¥í•˜ê²Œ ê¸°ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.(ì•„ì´í…œ 18)

<hr/>

### âœ… default ë©”ì„œë“œ
```java
/** êµ¬í˜„ ë°©ë²•ì´ ëª…í™•í•˜ê³  ê³µí†µì ì´ë¼ë©´ ë””í´íŠ¸ ë©”ì„œë“œë¡œ ë§Œë“¤ì–´ë„ ëœë‹¤.
 * @impleSpec ì„ ë¶™í˜€ ë¬¸ì„œí™”í•˜ëŠ”ê²Œ ì¢‹ë‹¤.(item19)
 * Object ë©”ì„œë“œ (equals hashcode ë“±)ë¥¼ ë””í´íŠ¸ ë©”ì„œë“œë¡œ ì œê³µí•´ì„œëŠ” ì•ˆëœë‹¤.
 * ì¸í„°í˜ì´ìŠ¤ëŠ” ì¸ìŠ¤í„´ìŠ¤ í•„ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤.
 */
public interface Student {
    public default void Hello() {
        System.out.println("ë°˜ê°‘ìŠµë‹ˆë‹¤.");
    }
}
```

### âœ… ì¶”ìƒ ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤
ì¸í„°í˜ì´ìŠ¤ì— ë””í´íŠ¸ ë©”ì„œê·¸ì˜ ê¸°ëŠ¥ì´ ì œê³µë˜ë©´ì„œ ê°œë°œìë“¤ì€ ì¤‘ë³µë˜ëŠ” ë©”ì„œë“œ êµ¬í˜„ì˜ ê·€ì°®ìŒì„ ë§ì´ ëœì–´ì£¼ì—ˆë‹¤.
> ê·¸ë ‡ë‹¤ê³  ë‹¨ì ì´ ì—†ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ê·¸ ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ì¶”ìƒ ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì œê³µí•œë‹¤.

### â›”ï¸ default ë©”ì„œë“œì˜ ë‹¨ì 
  1. Object ë©”ì„œë“œì¸ equals, hashcodeë¥¼ ë””í´íŠ¸ ë©”ì„œë“œë¡œ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
  2. ì¸í„°í˜ì´ìŠ¤ëŠ” ì¸ìŠ¤í„´ìŠ¤ í•„ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ê³  publicì´ ì•„ë‹Œ ì •ì  ë©”ì„œë“œë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ë‹¤.
  3. ë³¸ì¸ì´ ë§Œë“  ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹ˆë©´ ë””í´íŠ¸ ë©”ì„œë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ì—†ë‹¤.
> ê°„ë‹¨íˆ ì •ë¦¬í•˜ìë©´ ì¸í„°í˜ì´ìŠ¤ë¡œëŠ” íƒ€ì…ì„ ì •ì˜í•˜ê³ , ë©”ì„œë“œ êµ¬í˜„ì´ í•„ìš”í•œ ë¶€ë¶„ì€ ì¶”ìƒ ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ë‹¤.

```java
public interface Character {
    public void move();
    public void attack();
    public void rest();
    public void process();
}

public class Warrior implements Character {
    @Override
    public void move() {
        System.out.println("ê±·ë‹¤");
    }

    @Override
    public void attack() {
        System.out.println("ì¹¼ì„ íœ˜ë‘ë¥¸ë‹¤.");
    }

    @Override
    public void rest() {
        System.out.println("íœ´ì‹ì„ ì·¨í•œë‹¤.");
    }
}

public class Wizard implements Character{
    @Override
    public void move() {
        System.out.println("ê±·ë‹¤");
    }

    @Override
    public void attack() {
        System.out.println("ë§ˆë²•ì„ ì“´ë‹¤.");
    }

    @Override
    public void rest() {
        System.out.println("íœ´ì‹ì„ ì·¨í•œë‹¤.");
    }
}

public static void main(String[] args) {
   Warrior warrior = new Warrior();
   Wizard wizard = new Wizard();
   wizard.process();
   wizard.process();
}
```
> attackì„ ì œì™¸í•œ ë©”ì„œë“œëŠ” ëª¨ë‘ ì¤‘ë³µì´ ëœë‹¤. ì´ëŸ¬í•œ ì¤‘ë³µëœ ë¶€ë¶„ì„ ì¶”ìƒ ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ ì •ì˜í•˜ë©´ ëœë‹¤.
```java
public abstract class AbstractCharacter implements Character{
    @Override
    public void move() {
        System.out.println("ê±·ë‹¤");
    }

    @Override
    public void rest() {
        System.out.println("íœ´ì‹ì„ ì·¨í•œë‹¤.");
    }

    @Override
    public void process() {
        move();
        rest();
        attack();
    }
}

public class Warrior extends AbstractCharacter implements Character {
    @Override
    public void attack() {
        System.out.println("ì¹¼ì„ íœ˜ë‘ë¥¸ë‹¤.");
    }
}

public class Wizard extends AbstractCharacter implements Character{
    @Override
    public void attack() {
        System.out.println("ë§ˆë²•ì„ ì“´ë‹¤.");
    }
}
```
> ë””í´íŠ¸ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì¶”ìƒ ê³¨ê²© êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì¤‘ë³µì„ ì—†ì•¨ìˆ˜ë„ ìˆë‹¤.
â“ ê·¸ëŸ°ë° ê·¸ëƒ¥ `Character` ì— defaultë¥¼ ì‚¬ìš©í•´ì„œ ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë©´ ë˜ëŠ”ê²Œ ì•„ë‹Œê°€ ë¼ëŠ” ìƒê°ì´ ë“ ë‹¤.

## ì•„ì´í…œ 21. ì¸í„°í˜ì´ìŠ¤ëŠ” êµ¬í˜„í•˜ëŠ” ìª½ì„ ìƒê°í•´ ì„¤ê³„í•˜ë¼
java8 ì´ì „ì—ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ í•´ì¹˜ì§€ ì•Šê³  ë©”ì„œë“œë¥¼ ì¶”ê°€í•  ë°©ë²•ì´ ì—†ì—ˆì§€ë§Œ ì§€ê¸ˆì€ default ë©”ì„œë“œê°€ ìƒê²¼ë‹¤.
> ê·¸ë ‡ë‹¤ê³  í•´ì„œ ëª¨ë“  ìœ„í—˜ì´ ì‚¬ë¼ì§„ ê²ƒì€ ì•„ë‹ˆë‹¤.

![image](https://user-images.githubusercontent.com/53300830/166096351-0979dc6b-2292-439d-9322-c29ebc73360b.png)
> removeIfê°€ ì§„ì§œë¡œ í•˜ìœ„ í˜¸í™˜ì„±ì„ ì˜ ì§€ì¼œì£¼ëŠ”ì§€ëŠ” ì•„ë˜ í…ŒìŠ¤íŠ¸ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë‹¤.
[ì°¸ê³  ì˜ˆì œ](https://sejoung.github.io/2018/12/2018-12-17-Design_interfaces_for_posterity/#%EC%95%84%EC%9D%B4%ED%85%9C-21-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A5%BC-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EC%AA%BD%EC%9D%84-%EC%83%9D%EA%B0%81%ED%95%B4-%EC%84%A4%EA%B3%84%ED%95%98%EB%9D%BC)
```java
public class CollectionTest {

    @Test
    @DisplayName("ì‹±ê¸€ ìŠ¤ë ˆë“œì—ì„œ í•˜ìœ„ í˜¸í™˜ì„±ì„ ì§€ì¼œì¤„ê¹Œ?")
    void singleThreadTest() {
        List<String> list = new ArrayList<>();
        list.add("ê°•ì›ë„");
        list.add("ê²½ê¸°ë„");
        list.add("ì¶©ë¶");
        list.add("ì¶©ë‚¨");

	SynchronizedCollection<String> sc = SynchronizedCollection.synchronizedCollection(list);

        String a = "ê°•ì›ë„";

        sc.forEach((s) -> {
            log.debug("before={}", s);
        });

	// ê°•ì›ë„ë§Œ ì§€ìš´ë‹¤.
        sc.removeIf(p -> p.equals(a)); // ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ëŠ” ì¡´ì¬í•˜ì§€ ì•Šì§€ë§Œ, ìë°” 1.8ì˜ ë””í´íŠ¸ ë©”ì„œë“œë¡œ êµ¬í˜„ë¼ ìˆë‹¤.

        sc.forEach((s)-> {
            log.debug("after={}", s);
        });
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/166097539-75a74447-fe26-411f-9994-7b7fdc797382.png)
> ì•„ë¬´ëŸ° ë¬¸ì œ ì—†ì´ ì˜ ì‹¤í–‰ëœë‹¤.

```java
    @Test
    @DisplayName("ë©€í‹° ìŠ¤ë ˆë“œì—ì„œ í•˜ìœ„ í˜¸í™˜ì„±ì„ ì§€ì¼œì¤„ê¹Œ?")
    void multiThreadTest() throws InterruptedException {

        List<String> list = new ArrayList<>();
        list.add("ê°•ì›ë„");
        list.add("ê²½ê¸°ë„");
        list.add("ì¶©ë¶");
        list.add("ì¶©ë‚¨");

        SynchronizedCollection<String> sc = SynchronizedCollection.synchronizedCollection(list);

        String a = "ê°•ì›ë„";

        sc.forEach((s) -> {
            log.debug("before={}", s);
        });

        // thread 10ê°œ ìƒì„±
        int nTreads = 10;
        ExecutorService executorService = Executors.newFixedThreadPool(nTreads);
        CyclicBarrier barrier = new CyclicBarrier(nTreads);

        for (int i = 0; i < nTreads; i++) {
            executorService.submit(() -> {
                int idx = counter.addAndGet(1);

                log.info("idx = {} removeIf = {}", idx, sc.removeIf(p -> p.equals(a)));
                return null;
            });
        }

        executorService.awaitTermination(1, TimeUnit.SECONDS);

        sc.forEach((s)-> {
            log.info("after={}", s);
        });
    }
```

![image](https://user-images.githubusercontent.com/53300830/166097731-09e2e4be-0e5d-4859-86ca-348051139c7a.png)
![image](https://user-images.githubusercontent.com/53300830/166097770-74ab31d8-3962-454a-a15f-a841a0b3b557.png)

> ë‘ ì‚¬ì§„ì„ ë³´ë©´ ì‹¤í–‰í• ë•Œë§ˆë‹¤ ê²°ê³¼ê°€ ì œê°ê°ì¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.  
> ì¦‰ ë¦¬ìŠ¤íŠ¸ ê°ì²´ì— ë™ê¸°í™” ê¸°ëŠ¥ì´ ì œëŒ€ë¡œ ê°–ì¶”ì–´ì ¸ ìˆì§€ ì•Šë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.





