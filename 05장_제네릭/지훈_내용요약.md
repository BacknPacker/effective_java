# ì•„ì´í…œ 26. ë¡œ íƒ€ì…ì€ ì‚¬ìš©í•˜ì§€ ë§ë¼.

### â“ Raw Type(ë¡œ íƒ€ì…) ì´ë€?
ì œë„ˆë¦­ íƒ€ì…ì—ì„œ íƒ€ì… ë§¤ê°œë³€ìˆ˜ë¥¼ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤
- ì˜ˆì‹œë¡œ `List<E>`ëŠ” raw typeì˜ Listì´ë‹¤.  
- `List<String>`ê³¼ ê°™ì´ ì›ì†Œ íƒ€ì…ì„ ëª…ì‹œí•´ì„œ ì‚¬ìš©í•  ê²ƒì„ ê¶Œì¥í•œë‹¤.
  
### â“ ì™œ ì‚¬ìš©í•˜ì§€ ë§ë¼ëŠ” ê±¸ê¹Œ?

```java
public class RawType {
    public static void main(String[] args) {
        List rawType = new ArrayList();
        rawType.add("ê°•ì›ë„");
        rawType.add(01012341234);

        for (Iterator i = rawType.iterator(); i.hasNext(); ) {
            // ClassCastException ë°œìƒ
            String s = (String) i.next();
        }
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/166197964-0f628123-b121-4518-a9e5-f4771e8ce053.png)
> ì»´íŒŒì¼ ì‹œì ì—ì„œ ì¡ëŠ”ê²Œ ì•„ë‹Œ ì‹¤ì œë¡œ ê°’ì„ ê°€ì ¸ì™€ì„œ ìºìŠ¤íŒ… í•˜ëŠ” ì‹œì ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.  
> ì˜¤ë¥˜ëŠ” ë°œìƒ ì¦‰ì‹œ ì¦‰ ì»´íŒŒì¼ì‹œ ë°œê²¬í•´ì•¼ ë””ë²„ê¹…í•˜ëŠ” ê´€ì ì—ì„œë„ í¸í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

```java
public static void main(String[] args) {
    List<String> parameterizedType = new ArrayList<>();

    parameterizedType.add("ê°•ì›ë„");
    parameterizedType.add("ê°•ì›ë„");
    parameterizedType.add(123123);

    for (String s : parameterizedType) {
        System.out.println(s);
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/166197164-b23218f7-f4fb-4941-8b8c-5efb48b8af9c.png)
> ì»´íŒŒì¼ ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.  
> ì»´íŒŒì¼ ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒê³¼ ì»´íŒŒì¼ í›„ì— ë°œìƒí•˜ëŠ” ê²ƒì€ ì—„ì²­ë‚œ ì°¨ì´ê°€ ìˆë‹¤.

<hr/>

### âœ… ë¹„í•œì •ì  ì™€ì¼ë“œì¹´ë“œ íƒ€ì…
ì»¬ë ‰ì…˜ì˜ ì›ì†Œ íƒ€ì…ì„ ëª¨ë¥¼ ë•Œ í˜¹ì€ ì»¬ë ‰ì…˜ì— ì–´ë–¤ ì›ì†Œ íƒ€ì…ì´ë“  ë„£ê³  ì‚¬ìš©í•˜ê³  ì‹¶ì„ë•Œ ì‚¬ìš©í•œë‹¤.
```java
// Set<E>ì—ì„œ Eê°€ ë“¤ì–´ê°ˆ ìë¦¬ì— ?ë¡œ ëŒ€ì²´í•´ì£¼ë©´ ëœë‹¤.
static int numElementsInCommon(Set<?> s1, Set<?> s2) {}
```

```java
public static void main(String[] args) {
    HashSet rawTypeSet = new HashSet();
    HashSet<?> wildCardSet = new HashSet<>();

    rawTypeSet.add("ìŠ¤íŠ¸ë§íƒ€ì…");
    rawTypeSet.add(01012341234);

    wildCardSet.add("ìŠ¤íŠ¸ë§íƒ€ì…"); // ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
}
```
![image](https://user-images.githubusercontent.com/53300830/166201594-d4313499-aadb-4092-bea5-1f196e67e0c2.png)

> wildCardSet ì»¬ë ‰ì…˜ì— ë¬¸ìì—´ì— ì–´ë–¤ íƒ€ì…ì„ ë„£ë˜ì§€ê°„ì— ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

#### â“ ì™œ ì‚¬ìš©í•˜ëŠ”ê±¸ê¹Œ?
ì‹¤ì œ íƒ€ì… ë§¤ê°œë³€ìˆ˜ê°€ ë¬´ì—‡ì¸ì§€ ì‹ ê²½ ì“°ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ `?` ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤.
```java
static void numElementsInCommon(HashSet<?> s1, HashSet<?> s2) {
    int result = 0;
    for (Object o1 : s1) {
        if (s1.contains(s2)) result++;
    }
}
```
> ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ì— ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, ì´ ë©”ì„œë“œëŠ” ì»¬ë ‰ì…˜ì´ ì–´ë–¤ íƒ€ì…ì´ë“ ì§€ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.  
> ê·¸ëŸ¬ë¯€ë¡œ íŠ¹ì • íŒŒë¼ë¯¸í„°ì— ë§ê²Œ ì¼ì¼ì´ ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•  í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤.

# ì•„ì´í…œ 27. ë¹„ê²€ì‚¬ ê²½ê³ ë¥¼ ì œê±°í•˜ë¼.

### â“ ë¹„ê²€ì‚¬ ê²½ê³ ë€?
ì˜¤ë¥˜ëŠ” ì•„ë‹ˆì§€ë§Œ ì˜ì—­ì´ í•˜ì´ë¼ì´íŠ¸ ë˜ë©´ì„œ **ê°œë°œìì—ê²Œ ê²½ê³ **ë¥¼ ì£¼ëŠ” ê²ƒì„ ë§í•œë‹¤.

![image](https://user-images.githubusercontent.com/53300830/166394604-05fdb2bc-b796-4dfa-b9dd-7ae936c8be6b.png)

> ê°€ë” ì•Œê³ ë¦¬ì¦˜ í’€ë‹¤ê°€ í•˜ëŠ” ì‹¤ìˆ˜ ì¤‘ í•˜ë‚˜ì´ë‹¤.

```java
public static void main(String[] args) {
    int[] arr= new int[100];
}
```
> ì´ë ‡ê²Œ ë¹„ê²€ì‚¬ ê²½ê³ ë„ ì „ë¶€ í•´ê²°í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤. -> íƒ€ì… ì•ˆì „ì„± ë³´ì¥ (íƒ€ì… ì‹œìŠ¤í…œ ìì²´ê°€ ì˜ëª» ë˜ì§€ ì•ŠìŒì„ ë³´ì¥í•œë‹¤.)

[íƒ€ì… ì•ˆì „ì„±ì´ë€?](https://tlonist-sang.github.io/Today-I-learned/jekyll/update/2020/09/29/typed-language.html)

### âœ… SuppressWarning("unchecked")
ê²½ê³ ë¥¼ ì œê±°í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ì§€ë§Œ íƒ€ì…ì´ í™•ì‹¤í•˜ê²Œ ì•ˆì „í•˜ë‹¤ê³  í•  ìˆ˜ ìˆì„ë•Œ ì‚¬ìš©í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.
> ìœ„ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í• ë•ŒëŠ” í•­ìƒ ì‹ ì¤‘í•´ì•¼í•œë‹¤. 

```java
@SuppressWarnings("unchecked")
class ClassWarning {
    public Set<String> hello() {
        return new HashSet();
    }
}
```
> ì™œ ê²½ê³ ë¥¼ ëª»ì—†ì• ê³  @SuppressWarnings("unchecked") ë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ ì£¼ì„ìœ¼ë¡œ ë‚¨ê²¨ì•¼í•œë‹¤.

# ì•„ì´í…œ 28. ë°°ì—´ë³´ë‹¤ëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ë¼.
### âœ… ë°°ì—´ê³¼ ì œë„¤ë ‰ íƒ€ì…ì˜ ì°¨ì´ì 
- ë°°ì—´
  + ê³µë³€ì´ë‹¤.
  + Subê°€ Superì˜ í•˜ìœ„íƒ€ì…ì¼ ê²½ìš° Sub[]ì€ ë°°ì—´ Super[]ì˜ í•˜ìœ„íƒ€ì…ì´ ëœë‹¤.   
- ì œë„¤ë¦­
  - ë¶ˆê³µë³€ì´ë‹¤.
  - ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì´ ë‘ ê°œ ìˆì„ ë•Œ, ListëŠ” Listì˜ í•˜ìœ„íƒ€ì…ë„ ì•„ë‹ˆê³  ìƒìœ„ íƒ€ì…ë„ ì•„ë‹ˆë‹¤.  
> ë°°ì—´ì€ ëŸ°íƒ€ì„ ì‹œì ì— íƒ€ì…ì„ ì¸ì§€í•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤.(ì‹¤ì²´í™”), ì œë„¤ë¦­ì€ ëŸ°íƒ€ì„ ì‹œì ì— íƒ€ì… ì •ë³´ë¥¼ ì†Œê±°í•˜ê²Œ ë©ë‹ˆë‹¤.(erasure)  
> ì™œëƒí•˜ë©´ ì œë„¤ë¦­ì€ íƒ€ì… ì‹œìŠ¤í…œ ìì²´ê°€ ì»´íŒŒì¼ ì‹œì ì— ì—ëŸ¬ë¥¼ ì¡ê³  ëŸ°íƒ€ì„ì— ClassCastExceptionì´ ë°œìƒí•˜ëŠ” ì¼ì„ ë§‰ì•„ì£¼ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

#### â›”ï¸ í•˜ì§€ë§Œ ì‹¤ì œ ì½”ë”©ì—ì„œëŠ” ë¬¸ì œê°€ ìˆë‹¤. 
![image](https://user-images.githubusercontent.com/53300830/166395991-1bf05b27-c9d5-47af-88a9-00ca7d63ddd0.png)

#### â“ ê·¸ëŸ¼ ì œë„¤ë¦­ ë°°ì—´ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì–´ë– í•œê°€?
ì œë„¤ë¦­ + ë°°ì—´ì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ìš°ì„  ì•„ë˜ ì˜ˆì‹œ ì½”ë“œì´ë‹¤.
```java
new List<E>[]
new List<String>[]
new E[]
```
> ì œë„¤ë¦­ ë°°ì—´ì´ ë§Œì•½ í—ˆìš©ëœë‹¤ë©´ ëŸ°íƒ€ì„ì´ ClassCastException ì„ ë°©ì§€í•´ì¤€ë‹¤ëŠ” ì¥ì ì´ ì‚¬ë¼ì§„ë‹¤.
[ê¶ê¸ˆì¦](https://github.com/BacknPacker/effective_java/issues/29)

<hr/>

### âœ… ì‹¤ì²´í™” ë¶ˆê°€ íƒ€ì…(non-reifiable type)
ì‹¤ì²´í™”ê°€ ë˜ì§€ ì•Šì•„ì„œ ëŸ°íƒ€ì„ì—ëŠ” ì»´íŒŒì¼ íƒ€ì„ë³´ë‹¤ íƒ€ì… ì •ë³´ë¥¼ ì ê²Œ ê°€ì§€ëŠ” íƒ€ì…ì„ ëœ»í•œë‹¤.  
ì˜ˆ) ì •ê·œ íƒ€ì… ë§¤ê°œë³€ìˆ˜ `E` / ì œë„¤ë¦­ íƒ€ì… `List<E>` / ë§¤ê°œë³€ìˆ˜ íƒ€ì… `List<String>`

### âœ… ë¹„ê²€ì‚¬ í˜•ë³€í™˜ ê²½ê³ ë¥¼ ì œê±°í•˜ê¸° ìœ„í•´ ë°°ì—´ ëŒ€ì‹  ë¦¬ìŠ¤íŠ¸ ì‚¬ìš©
ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ Chooserë¥¼ í†µí•œ íƒ€ì… ì•ˆì „ì„± í™•ë³´
> ì„±ëŠ¥ìƒ ì¡°ê¸ˆ ëŠë ¤ì§€ì§€ë§Œ, ëŸ°íƒ€ì„ì‹œì— ClassCastExceptionì„ ë§Œë‚  ì¼ì´ ì‚¬ë¼ì§„ë‹¤.
```java
public class Chooser<T> {
    private final List<T> choiceList;

    public Chooser(Collection<T> choices) {
        choiceList = new ArrayList<>(choices);
    }

    public T choose() {
        Random rnd = ThreadLocalRandom.current();
        return choiceList.get(rnd.nextInt(choiceList.size));
    }
}
```

### â“ ì™œ ë°°ì—´ë³´ë‹¤ ë¦¬ìŠ¤íŠ¸ì¼ê¹Œ?
> ì•„ì£¼ ê°„ë‹¨í•œ ì´ìœ ì…ë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ ~ëŒ€ì‹  ~ì‚¬ìš©í•˜ë¼ ì¼ ë•Œë§ˆë‹¤ ê¸°ë³¸ì ìœ¼ë¡œ í›„ìê°€ ë” ì•ˆì „í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.    
> ì¶”ê°€ì ìœ¼ë¡œ ëŸ°íƒ€ì„ì´ ì•„ë‹Œ ì»´íŒŒì¼ ì‹œì ì— ì—ëŸ¬ë¥¼ ì¡ì•„ì£¼ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

## ì•„ì´í…œ 29. ì´ì™•ì´ë©´ ì œë„¤ë¦­ íƒ€ì…ìœ¼ë¡œ ë§Œë“¤ì–´ë¼.
> ì´ì „ ì•„ì´í…œì—ì„œ ê³„ì† ì´ì•¼ê¸° í–ˆë˜ ë‚´ìš©ì´ë‹¤. ì œë„¤ë¦­ì€ íƒ€ì…ì•ˆì „ì„±ì„ ë³´ì¥í•˜ê³ , í˜•ë³€í™˜ê³¼ íƒ€ì…ì¶”ë¡ ì„ ìƒëµí•˜ê²Œ í•´ì¤€ë‹¤.

### â“ ì™œ ì œë„¤ë¦­ ë©”ì„œë“œë¡œ ë°”ê¿”ì•¼ í• ê¹Œ? ê·¸ë¦¬ê³  ì–´ë–»ê²Œ ë°”ê¾¸ë©´ ë˜ëŠ” ê²ƒì¼ê¹Œ?
ìš°ì„  ì•„ì´í…œ 7ì—ì„œ í–ˆë˜ `Stack` ì½”ë“œë¥¼ ì˜ˆì‹œë¡œ ë“¤ ìˆ˜ ìˆë‹¤. Object ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ëìœ¼ë¯€ë¡œ ì œë„¤ë¦­ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ ìƒíƒœì´ë‹¤. [ì°¸ê³  ë¸”ë¡œê·¸](https://catsbi.oopy.io/83635cfe-1cab-43f2-a943-56a9efd83fb2#138a7431-32b1-4dc6-a6ea-ddc7c3b57776)

```java
public class Stack {
    private Object[] elements;
    private int size = 0;
    private static final int DEFAULT_INITIAL_CAPACITY = 16;

    public Stack() {
        elements = new Object[DEFAULT_INITIAL_CAPACITY];
    }

    // ì›ì†Œ ì¶”ê°€
    public void push(Object e) {
        ensureCapacity();
        elements[size++] = e;
    }

    // ì›ì†Œ ì œê±° ê°œì„  ì½”ë“œ
    public void pop() {
        if (size == 0) {
            new EmptyStackException();
            return;
        }
        Object element = elements[--size];
        elements[size] = null;
    }
    // ìƒëµ
}
```
> ì»´íŒŒì¼ì‹œì—ëŠ” ë¬¸ì œê°€ ì—†ë‹¤. ê·¸ë˜ë„ ì œë„¤ë¦­ìœ¼ë¡œ ë°”ê¿”ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ëª…í™•í•˜ë‹¤. popì„ í†µí•´ êº¼ë‚¸ ê°ì²´ë¥¼ ê³„ì† Objectë¡œ í˜•ë³€í™˜ í•´ì¤˜ì•¼ í•˜ê¸°ë•Œë¬¸ì´ë‹¤.

```java
public class GenericStack<E> {
    private E[] elements;
    private int size = 0;
    private static final int DEFAULT_INITIAL_CAPACITY = 16;

    public GenericStack() {
        elements = new E[DEFAULT_INITIAL_CAPACITY]; 
        // ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ
        // java: generic array creation
    }

    // ì›ì†Œ ì¶”ê°€
    public void push(E e) {
        ensureCapacity();
        elements[size++] = e;
    }

    // ì›ì†Œ ì œê±° ê°œì„  ì½”ë“œ
    public void pop() {
        if (size == 0) {
            new EmptyStackException();
            return;
        }
        E element = elements[--size];
        elements[size] = null;
    }
    // ìƒëµ
}
```
> ì•„ì´í…œ 28ì„ ìƒê°í•´ë³´ë©´ ì•Œ ìˆ˜ ìˆë‹¤. ì œë„¤ë¦­ ë°°ì—´ì´ê¸° ë•Œë¬¸ì— ë¶ˆê°€ëŠ¥í•˜ë‹¤. 

### âœ… í•´ê²° ë°©ë²• 1. Object ë°°ì—´ ìƒì„±í•œ ë’¤ ì œë„¤ë¦­ìœ¼ë¡œ í˜•ë³€í™˜í•˜ê¸°
í•  ìˆ˜ëŠ” ìˆì§€ë§Œ íƒ€ì…ì´ ì•ˆì „í•˜ì§€ ì•Šë‹¤ëŠ” ê²½ê³ ê°€ ëœ¬ë‹¤.

![image](https://user-images.githubusercontent.com/53300830/166614043-192f51a6-6654-4039-b75d-cde0ab6b72e3.png)
> ë‚´ê°€ ë³´ê¸°ì—” íƒ€ì…ì´ ì•ˆì „í•˜ì§€ë§Œ IDEì—ì„œëŠ” ê²½ê³ ë¬¸êµ¬ë¥¼ ë‚ ë¦¬ê³  ìˆë‹¤.  
> ì´ëŸ´ë•Œ ì‚¬ìš©í•˜ë¼ê³  ìˆëŠ”ê²Œ ì•„ì´í…œ 27ì—ì„œ ë°°ìš´ `@SuppressWarnings` ì´ë‹¤.

```java
@SuppressWarnings("unchecked")
public GenericStack() {
    elements = (E[])new Object[DEFAULT_INITIAL_CAPACITY];
}
```
#### â“ ì–´ë–»ê²Œ í™•ì‹¤í•˜ê²Œ ì•ˆì „ì„±ì´ ë³´ì¥ëœë‹¤ê³  í™•ì‹ í•˜ê³  ê²½ê³ ë¥¼ ë¬´ì‹œí•˜ê²Œ ì½”ë”©í•˜ëŠ”ê±¸ê¹Œ?
  - elements ëŠ” push(E)ë¡œ ë„˜ì–´ì˜¨ E ì¸ìŠ¤í„´ìŠ¤ë§Œ ë‹´ê²Œë˜ë¯€ë¡œ íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥ë°›ì„ ìˆ˜ ìˆë‹¤.
  - `private E[] elements` privateë¡œ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
> ì´ëŸ¬í•œ ì´ìœ ë¡œ ì•ˆì „ì„±ì´ ë³´ì¥ë˜ê¸°ì— ê²½ê³ ë¥¼ ë¬´ì‹œí•˜ê²Œ ë§Œë“¤ì–´ë„ ëœë‹¤.
#### âœ… ì¥ì  1. ê°€ë…ì„±ì´ ì¢‹ë‹¤.
#### âœ… ì¥ì  2. í˜•ë³€í™˜ ìƒì„±ì í˜¸ì¶œì‹œ í•œ ë²ˆë§Œ í•´ì£¼ë©´ ë” ì´ìƒ í•  í•„ìš”ê°€ ì—†ë‹¤.
#### â›”ï¸ ë‹¨ì  1. ë°°ì—´ì˜ ëŸ°íƒ€ì„ì´ ì»´íŒŒì¼íƒ€ì„ íƒ€ì…ê³¼ ë‹¬ë¼ í™ ì˜¤ì—¼(heap pollution)ì„ ì¼ìœ¼í‚¨ë‹¤.

> ì´ë²ˆ Stack ì˜ˆì œëŠ” ì˜ˆì™¸ì´ë‹¤.
[í™ ì˜¤ì—¼ì´ë€? (ì˜ˆì œ í¬í•¨)](http://kimalam.blogspot.com/2019/09/java-heap-pollution.html)

### âœ… í•´ê²° ë°©ë²• 2. Element íƒ€ì…ì„ E[]ì—ì„œ Object[]ë¡œ ë³€ê²½í•œë‹¤.

```java
public class GenericStack<E> {
    private Object[] elements;
    // ìƒëµ
    
    public GenericStack() {
      elements = new Object[DEFAULT_INITIAL_CAPACITY];
    }
    // ìƒëµ
    
    public E pop() {
      if(size == 0) throw new EmptyStackException();
      E result = (E) elements[--size]; // Warning : unchecked cast
      elements[size] = null;
      return result;
    }
}
```

![image](https://user-images.githubusercontent.com/53300830/166615213-2b1cff17-3dba-419c-86e2-59ab44d6830e.png)
> elementsë¥¼ Object ë°°ì—´ë¡œ ê·¸ëŒ€ë¡œ ë‘ê³  popìœ¼ë¡œ êº¼ë‚¼ ê²½ìš° ì •ê·œíƒ€ì… ë§¤ê°œë³€ìˆ˜ì¸ Eë¡œ í˜•ë³€í™˜ í•´ì„œ ë°˜í™˜í•  ê²½ìš° ì´ì „ê³¼ ê°™ì´ unckecked ê²½ê³ ê°€ ëœ¨ê²Œ ëœë‹¤. ì´ìœ ëŠ” í•´ê²°ë²• 1ê³¼ ê°™ë‹¤.

```java
public E pop() {
    if(size == 0) throw new EmptyStackException();
		//push ë©”ì„œë“œì—ì„œ Eíƒ€ì…ë§Œ í—ˆìš©í•˜ê¸°ì— ì´ í˜•ë³€í™˜ì€ ì•ˆì „í•˜ë‹¤.
		@SuppressWarnings("unchecked")
    E result = (E) elements[--size];
    elements[size] = null;
    return result;
}
```
> push ë©”ì„œë“œì—ì„œ Eíƒ€ì…ë§Œ í—ˆìš©í•˜ê¸°ì— ì´ í˜•ë³€í™˜ì€ ì•ˆì „í•˜ë‹¤.

<hr/>

### âœ… ë§¤ê°œë³€ìˆ˜ì— ì œì•½ì„ ë‘ëŠ” ì œë„¤ë¦­ íƒ€ì…
```java
Stack<String> stackStr = new GenericStack<>();
Stack<Integer> stackInt = new GenericStack<>();
Stack<Double> stackDouble = new GenericStack<>();
```
> íƒ€ì… ë§¤ê°œë³€ìˆ˜ì— ì œì•½ì„ ë‘ì§€ ì•Šê³  ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.  

<hr/>

### ğŸ“‹ ê°„ë‹¨ ì •ë¦¬  
ì œë„¤ë¦­ì„ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²½ìš° `ë§¤ë²ˆ ì§ì ‘ í˜•ë³€í™˜ í›„ ë„˜ê²¨ì¤˜ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨`ì´ ìˆë‹¤. ê·¸ë ‡ê¸°ì— ì œë„¤ë¦­ íƒ€ì…ì„ ì‚¬ìš©í•´ ì´ëŸ° ë¶ˆí¸í•¨ì„ í•´ì†Œí•  ìˆ˜ ìˆë‹¤.

## ì•„ì´í…œ 30. ì´ì™•ì´ë©´ ì œë„¤ë¦­ ë©”ì„œë“œë¡œ ë§Œë“¤ì–´ë¼.
> ì•„ì´í…œ 29ëŠ” `íƒ€ì…` 30ì€ `ë©”ì„œë“œ`ë¥¼ ì œë„¤ë¦­ìœ¼ë¡œ ë§Œë“¤ì–´ì•¼í•˜ëŠ” ì´ìœ ë¥¼ ì•Œë ¤ì¤€ë‹¤.

```java
// Collections.sort()
public static <T extends Comparable<? super T>> void sort(List<T> list) {
  list.sort(null);
}
```

### â“ ì™œ ì œë„¤ë¦­ì„ ì“¸ê¹Œ?
*ì´ì „ ë‚´ìš© ë³µìŠµ*  
ì“°ì§€ ì•Šìœ¼ë©´, ì»´íŒŒì¼ì‹œì— ì˜¤ë¥˜ë¥¼ ì¡ì•„ë‚´ì§€ ëª»í•˜ê²Œ ëœë‹¤. ì´ë§ì¸ì¦‰ìŠ¨ ëŸ°íƒ€ì„ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ëŠ” ëœ»ì´ë‹¤.
> ì¦‰ ì•ˆì „ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•œë‹¤.

<hr/>

### âœ… ë¡œìš°íƒ€ì…ìœ¼ë¡œ ë§Œë“  ì œë„¤ë¦­
```java
// ë‘ ì§‘í•©ì˜ í•©ì§‘í•©ì„ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œì´ë‹¤.
public static Set union(Set s1, Set s2) {
  Set result = new HashSet(s1);
  result.addAll(s2);
  return result;
}
```
> í•˜ì§€ë§Œ ì´ ì½”ë“œëŠ” ì»´íŒŒì¼ì‹œ ê²½ê³ ê°€ ë°œìƒí•œë‹¤.
```java
// ë§¤ê°œë³€ìˆ˜ì— íƒ€ì…ì„ ëª…ì‹œí•˜ì§€ ì•Šì•„ ì˜¬ë°”ë¥¸ íƒ€ì…ì¸ì§€ ì²´í¬ í•  ìˆ˜ ì—†ê¸°ì— ì»´íŒŒì¼ëŸ¬ê°€ ê²½ê³ ë¥¼ í•œë‹¤.
unchecked call to HashSet(Collection<? extends E) as a member of raw type HashSet Set result = new HashSet(s1):  
// íƒ€ì…ì„ ì•Œ ìˆ˜ ì—†ëŠ” rawíƒ€ì…ì¸ Setì— ì›ì†Œë¥¼ ì¶”ê°€í•˜ê³  ìˆì–´, ì˜¬ë°”ë¥¸ íƒ€ì…ì¸ì§€ ì²´í¬í•  ìˆ˜ ì—†ì–´ ì»´íŒŒì¼ëŸ¬ê°€ ê²½ê³ ë¥¼ í•œë‹¤.
unchecked call to addAll(Collection<? extends E) as a member of raw type Set result.addAll(s);
```

> ê²½ê³ ë¥¼ ëª¨ë‘ ì—†ì• ê¸° ìœ„í•´ì„œëŠ” íƒ€ì…ì„ ì•ˆì „í•˜ê²Œ ë§Œë“¤ì–´ì•¼í•œë‹¤. 

```java
public static <E> Set<E> union(Set<E> s1, Set<E> s2) {
  Set<E> result = new HashSet<>(s1);
  result.addAll(s2);
  return result;
}
```

<hr/>

### âœ… ì œë„¤ë¦­ ì‹±ê¸€í„´ íŒ¨í„´
ë¶ˆë³€ ê°ì²´ë¥¼ ì—¬ëŸ¬ íƒ€ì…ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì•¼ í•  ë•Œ ê³ ë ¤í•  íŒ¨í„´ì´ë‹¤.

```java
// Collections.reversOrder / Collections.emptySet

@SuppressWarnings("unchecked") // ì–´ë– í•œ ìˆ˜ì •ë„ ì—†ì´ í˜•ë³€í™˜ë§Œ í•˜ê¸°ì— íƒ€ì…ì˜ ì•ˆì „ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.
public static <T> Comparator<T> reverseOrder() {
  return (Comparator<T>) ReverseComparator.REVERSE_ORDER;
}

private static class ReverseComparator
  implements Comparator<Comparable<Object>>, Serializable {

  static final ReverseComparator REVERSE_ORDER
    = new ReverseComparator();

  public int compare(Comparable<Object> c1, Comparable<Object> c2) {
    return c2.compareTo(c1);
  }

  @java.io.Serial
    private Object readResolve() { return Collections.reverseOrder(); }

  @Override
  public Comparator<Comparable<Object>> reversed() {
    return Comparator.naturalOrder();
  }
}
```

<hr/>

### âœ… ì œë„¤ë¦­ íƒ€ì… í•œì •
ë“œë¬¼ê²Œ ì‚¬ìš©ë˜ëŠ” íŒ¨í„´ì´ë‹¤.  
ìê¸° ìì‹ ì´ ë“¤ì–´ê°„ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ íƒ€ì… ë§¤ê°œë³€ìˆ˜ì˜ í—ˆìš© ë²”ìœ„ë¥¼ í•œì •í•  ìˆ˜ ìˆëŠ”ë° ì´ëŸ° ê°œë…ì„ ì¬ê·€ì  íƒ€ì… í•œì •ì´ë¼ê³  í•œë‹¤.  
```java
public static <E extends Comparable<E>> E max(Collection<E> c);
```
- Comparable ì¸í„°í˜ì´ìŠ¤ì™€ í•¨ê»˜ ì“°ì¸ë‹¤.
- ë³´í†µ ìê¸° ìì‹ ê³¼ ë¹„êµí•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.

## ì•„ì´í…œ 31. í•œì •ì  ì™€ì¼ë“œì¹´ë“œë¥¼ ì‚¬ìš©í•´ API ìœ ì—°ì„±ì„ ëˆ‚ì—¬ë¼.
```java
// ì•„ì´í…œ 29ì˜ Stack ì—°ì¥ì„ 
public class GenericStack<E> {
    
    // ì´ì „ ë‚´ìš© ìƒëµ 
    public void pushAll(Iterable<E> src) {
        for (E e : src) push(e);
    }
}
```
```java
class GenericStackTest {

    // ì•„ì´í…œ 31 í…ŒìŠ¤íŠ¸
    @Test
    @DisplayName("ì™€ì¼ë“œì¹´ë“œ íƒ€ì… ì‚¬ìš© ì „")
    void ì™€ì¼ë“œì¹´ë“œ() {
        GenericStack<Number> stack = new GenericStack<Number>();
        List<Integer> integers = Arrays.asList(1, 2, 3, 4, 5);

        stack.pushAll(integers);
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/166885169-e4276ef5-cf0b-4e6d-b880-e8f1f1f09fca.png)
> IntegerëŠ” Numberì˜ í•˜ìœ„íƒ€ì…ì´ë‹ˆ ë…¼ë¦¬ì ìœ¼ë¡œ ë¬¸ì œê°€ ì—†ì–´ë³´ì´ë‚˜ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.  
> ì¦‰ ë§¤ê°œë³€ìˆ˜í™” íƒ€ì…ì´ `ë¶ˆê³µë³€` ì´ê¸° ë•Œë¬¸ì— Numberíƒ€ì…ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

```java
// ìˆ˜ì • ì½”ë“œ
public void pushAll(Iterable<? extends E> src) {
    for (E e : src) push(e);
}
```
> Iterable<E> ì—ì„œ Iterable<? extends E> ë¡œ ìˆ˜ì •í•˜ë©´ì„œ ì™€ì¼ë“œì¹´ë“œ íƒ€ì…ì„ ì ìš©í•´ì„œ ì˜¤ë¥˜ë¥¼ í•´ê²°

<hr/>

### âœ… PECS ê³µì‹
> PECS: producer-extedns, consumer-super. 
> ëª¨ë“ˆ(ê°ì²´, ë©”ì„œë“œ)ê°€ ìƒì‚°ìì˜ ì—­í• ì„ í•œë‹¤ë©´ extends í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.  
> ë°˜ë©´ì— ì†Œë¹„ìì˜ ì—­í• ì´ë¼ë©´ super í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œë‹¤.

#### â“ ìƒì‚°ìë€?
- ë§¤ê°œë³€ìˆ˜ê°€ ìƒì‚°í•˜ëŠ” ì—­í• ì´ë¼ëŠ” ì˜ë¯¸ëŠ” ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ì— ìƒˆë¡œìš´ ì›ì†Œë¥¼ `ì¶”ê°€` í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.  
- ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ìƒˆë¡œìš´ ì›ì†Œê°€ ì¶”ê°€ë¼ ë¬¸ì œì—†ì´ ì‚¬ìš©í•˜ë ´ë…€ ì¶”ê°€ë˜ëŠ” ì›ì†Œì˜ íƒ€ì…ì´ ê¸°ì¡´ ì¸ìŠ¤í„´ì˜ ì›ì†Œ íƒ€ì…ë³´ë‹¤ `í•˜ìœ„ íƒ€ì…` ì´ì–´ì•¼ í•œë‹¤.  
> ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ì´ ì ìš©ë˜ë©° ë¬¸ì œì—†ì´ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. 

#### â“ ì†Œë¹„ìë€?
- ë§¤ê°œë³€ìˆ˜ê°€ ì†Œë¹„í•˜ëŠ” ì—­í• ì´ë¼ëŠ” ì˜ë¯¸ë¡œ ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì›ì†Œë¥¼ `ì‚¬ìš©` í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
- ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì‚¬ìš©í•  ë§¤ê°œë³€ìˆ˜ ë¦¬ìŠ¤íŠ¸ì— ë„£ìœ¼ë ¤ë©´ ë§¤ë°°ê²¬ìˆ˜ ë¦¬ìŠ¤íŠ¸ì˜ íƒ€ì…ì´ ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì›ì†Œ íƒ€ì…ë³´ë‹¤ `ìƒìœ„ íƒ€ì…` ì´ì–´ì•¼ ë¬¸ì œì—†ì´ ëŒì•„ê°„ë‹¤

```java
public class Stack<E> {
    // ìƒì‚°ì
    public void pushAll(Iterable<? extends E> src) {
        for (E e : src) {
            push(e);
        }
    }
    // ì†Œë¹„ì
    public void popAll(Collection<? super E> dst) {
        while (!isEmpty()) {
            dst.add(pop());
        }
    }
}
```

<hr/>

### â“ ì–¸ì œ íƒ€ì… ë§¤ê°œë³€ìˆ˜ì™€ ì™€ì¼ë“œì¹´ë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²ƒì¼ê¹Œ?
ë©”ì„œë“œ ì„ ì–¸ì— íƒ€ì… ë§¤ê°œë³€ìˆ˜ê°€ í•œ ë²ˆì´ë¼ë„ ë‚˜ì˜¨ë‹¤ë©´ ì™€ì¼ë“œ ì¹´ë“œë¡œ ëŒ€ì²´í•˜ë©´ ëœë‹¤.  
- ë¹„ í•œì •ì  íƒ€ì… ë§¤ê°œë³€ìˆ˜ : **ë¹„ í•œì •ì  ì™€ì¼ë“œì¹´ë“œ**
- í•œì •ì  íƒ€ì… ë§¤ë°°ê²¬ìˆ˜   : **í•œì •ì  ì™€ì¼ë“œì¹´ë“œ**

```java
// êµì²´ ì „
public static <E> void swap(List<E> list, int 1, int j);
// êµì²´ í›„
public static void swap(List<?> list, int 1, int j);
```
> í•˜ì§€ë§Œ ë¬¸ì œê°€ ìˆë‹¤. null ì™¸ì—ëŠ” ì–´ë–¤ ê°’ë„ ë„£ì„ ìˆ˜ ì—†ë‹¤ëŠ” ì ì´ë‹¤.
	
```java
// í•´ê²° ì½”ë“œ
public static void swap(List<?> list, int i, int j) {
      swapHelper(list, i, j);
}

private static <E> void swapHelper(List<E> list, int i, int j) {
    list.set(i, list.set(j, list.get(i)));
}
```
> ì™€ì¼ë“œì¹´ë“œ íƒ€ì…ì˜ ì‹¤ì œ íƒ€ì…ì„ ì•Œë ¤ì£¼ëŠ” ë©”ì„œë“œë¥¼ private ë©”ì„œë“œë¡œ ë”°ë¡œ ì‘ì„±í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.  
> ì¦‰ private ë©”ì„œë“œì¸ swapHelper ë©”ì„œë“œëŠ” listê°€ List<E> ì„ì„ ì•Œê³  ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.


## ì•„ì´í…œ 32. ì œë„¤ë¦­ê³¼ ê°€ë³€ì¸ìˆ˜ë¥¼ í•¨ê»˜ ì“¸ ë•ŒëŠ” ì‹ ì¤‘í•˜ë¼.
#### â“ ê°€ë³€ì¸ìˆ˜ë€?
ë©”ì„œë“œì— ë„˜ê¸°ëŠ” ì¸ìˆ˜ì˜ ê°œìˆ˜ë¥¼ í´ë¼ì´ì–¸íŠ¸ê°€ ì¡°ì ˆí•  ìˆ˜ ìˆê²Œ í•¨ìœ¼ë¡œì¨ ìœ ì—°ì„±ì„ ë†’í˜€ì¤€ë‹¤.  
ë°›ëŠ” ì…ì¥ì—ì„œëŠ” ë°°ì—´ì´ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ê²Œ ëœë‹¤.  [ì°¸ê³  ë¸”ë¡œê·¸](https://sleepyeyes.tistory.com/29)

### â›”ï¸ ì œë„¤ë¦­ê³¼ ê°€ë³€ì¸ìˆ˜ë¥¼ í•¨ê»˜ ì“¸ ë•Œ ìœ„í—˜í•œ ì´ìœ 
```java
public class Varargs {
    public static void main(String[] args) {
        dangerous(List.of("one", "two", "three"));
    }

    static void dangerous(List<String>... stringLists) {
        List<Integer> intList = List.of(50);

        Object[] objects = stringLists;
        objects[0] = intList; // í™ ì˜¤ì—¼ ë°œìƒ
        String s = stringLists[0].get(0); // ClassCastException

        System.out.println("s = " + s);
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/167053706-c55a2a4b-d17d-475f-bb22-0f7f284ccb94.png)

`heap pollution`(í™ ì˜¤ì—¼)ìœ¼ë¡œ ì¸í•´ `ClassCastExcption` ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
> ìœ„ ì½”ë“œì—ì„œëŠ” intListì˜ ìˆ«ìë¥¼ Stringìœ¼ë¡œ ì»´íŒŒì¼ëŸ¬ê°€ í˜•ë³€í™˜ì„ ì‹œë„í•˜ë‹¤ê°€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.  
> ì¦‰ íƒ€ì„ ì•ˆì „ì„±ì´ ê¹¨ì§€ê¸° ë•Œë¬¸ì— ì œë„¤ë¦­ ê°€ë³€ì¸ìˆ˜ ë°°ì—´ ë§¤ê°œë³€ìˆ˜ì— ê°’ì„ ì €ì¥í•˜ëŠ”ê±´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

#### â“ ì•„ì´í…œ 28ì—ì„œëŠ” ì œë„¤ë¦­ë°°ì—´ì„ ìƒì„± í•  ìˆ˜ ì—†ë‹¤ê³  í–ˆëŠ”ë°?
ì‹¤ë¬´ì—ì„œ ìœ ìš©í•˜ê¸° ë•Œë¬¸ì— ì œë„¤ë¦­ ê°€ë³€ì¸ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¥¼ í—ˆìš©í•´ì£¼ëŠ” ê²ƒì´ë‹¤.  
- ì˜ˆì‹œ) `Arrays.asList(T... a)`, `Collections.addAll(Collection<? super T>`

<hr/>

### âœ… @SafeVarags
ì œë„¤ë¦­ ê°€ë³€ì¸ìˆ˜ ë©”ì„œë“œ ì‘ì„±ìê°€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ë°œìƒí•˜ëŠ” ê²½ê³ ë¥¼ ìˆ¨ê²¨ì¤€ë‹¤.  
> ë‹¨ íƒ€ì… ì•ˆì „í•¨ì„ ë³´ì¥í•  ë•Œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```java
public class SafetyVarargs {

    // T íƒ€ì… ì¸ìˆ˜ 3ê°œë¥¼ ë°›ì•„ ê·¸ ì¤‘ 2ê°œë¥¼ ë¬´ì‘ìœ„ë¡œ ê³¨ë¼ ë‹´ì€ ë°°ì—´ ë°˜í™˜
    static <T> T[] pickTwo(T a, T b, T c) {
        switch (ThreadLocalRandom.current().nextInt(3)) {
            // toArray í˜¸ì¶œ
            case 0: return toArray(a, b);
            case 1: return toArray(a, c);
            case 2: return toArray(b, c);
        }
        throw new AssertionError();
    }

    static <T> T[] toArray(T... args) {
        return args;
    }

    public static void main(String[] args) {
        // pickTwo í˜¸ì¶œì‹œ TëŠ” String íƒ€ì…ì´ë‹¤.
        // ê·¸ëŸ¼ toArrayì˜ Tì—ë„ Stringì´ ë„˜ê²¨ì ¸ String[]ì´ returnì´ ë  ê²ƒì´ë¼ê³  ì˜ˆì¸¡ëœë‹¤.
        String[] attributes = pickTwo("ì¢‹ì€", "ë¹ ë¥¸", "ê°€");
    }
}
```
![image](https://user-images.githubusercontent.com/53300830/167055045-d504cc54-ff97-411a-96d2-b7ca68f6893a.png)

> toArray ë©”ì„œë“œì—ì„œ returnì„ String[]ì´ ì•„ë‹Œ Object[]ë¥¼ ë¦¬í„´í•˜ê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ ë°œìƒ  
#### â“ ì™œ toArrayëŠ” Object[]ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì¼ê¹Œ?
ê°„ë‹¨í•˜ë‹¤ ì œë„¤ë¦­ ë°°ì—´ ì´ì¤‘ íƒ€ì… ì¶”ë¡ ì‹œ ì •ê·œ íƒ€ì… ë§¤ê°œë³€ìˆ˜ë¥¼ `Object`ë¡œ ì¶”ë¡ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
![image](https://user-images.githubusercontent.com/53300830/167055187-13866781-675b-40bd-ad0c-a8078adc70cf.png)

```java
@SafeVarargs
static <T> List<T> flatten(List<? extends T>... lists) {
    List<T> result = new ArrayList<>();
    for (List<? extends T> list : lists) {
        result.addAll(list);
    }
    return result;
}
```
> T[]ë¥¼ Listë¡œ ë³€ê²½í•˜ê³  @SafeVarags ì–´ë…¸í…Œì´ì…˜ì„ ì¶”ê°€ë¡œ ë¶™í˜€ì£¼ë©´ ëœë‹¤.  
> ë°°ì—´ì€ ì‹¤ì²´í™”ë˜ê¸° ë•Œë¬¸ì— ëŸ°íƒ€ì„ì‹œ ì œë„¤ë¦­ íƒ€ì…ì •ë³´ë¥¼ ê°€ì§€ë‚˜, ë§¤ê°œë³€ìˆ˜í™” íƒ€ì…ì€ ì»´íŒŒì¼ì‹œ ì´ë¯¸ ìºìŠ¤íŒ… ì •ë³´ê°€ ê²°ì •ëœ í›„ ëŸ°íƒ€ì„ë•Œ ì œë„¤ë¦­ ì†Œê±°ê°€ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

## ì•„ì´í…œ 33. íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆë¥¼ ê³ ë ¤í•˜ë¼.

### â“ íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆë€?
ì»¨í…Œì´ë„ˆ ëŒ€ì‹  í‚¤ë¥¼ ë§¤ê°œë³€ìˆ˜í™”í•˜ì—¬ ì»¨í…Œì´ë„ˆì— ê°’ì„ ë„£ê±°ë‚˜ ëº„ ë•Œ ë§¤ê°œë³€ìˆ˜í™”í•œ í‚¤ë¥¼ í•¨ê»˜ ì œê³µí•˜ëŠ” ë°©ì‹ì´ë‹¤.  
ì œë„¤ë¦­ íƒ€ì… ì‹œìŠ¤í…œì´ ê°’ì˜ íƒ€ì…ì´ í‚¤ì™€ ê°™ìŒì„ ë³´ì¥í•´ì¤€ë‹¤.

#### â“ ì»¨í…Œì´ë„ˆëŠ” ë­”ë°?
- ê°ì²´ì˜ `ì €ì¥` ì´ë¼ëŠ” ê´€ì ì—ì„œ ê°€ì¥ ìœ ëª…í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” `Array` (ë°°ì—´)ì´ë‹¤. íŠ¹íˆë‚˜ ì›ì‹œ(primitive)íƒ€ì…ì˜ ê°’ë“¤ì„ ì €ì¥í•˜ì—¬ ë‹¤ë£°ë•Œ ë°°ì—´ì„ ë§ì´ ì‚¬ìš©í•œë‹¤.  
- í•˜ì§€ë§Œ ì´ëŸ¬í•œ ë°°ì—´ë“¤ì€ í¬ê¸°ê°€ í•œ ë²ˆ ì •í•´ì§€ë©´ ë°”ê¿€ ìˆ˜ ì—†ë‹¤ë¼ëŠ” ê²ƒì´ ê°€ì¥ í° ë‹¨ì ì´ê³  ê·¸ë¡œì¸í•œ ì œì•½ì´ í¬ë‹¤.  
> ì´ëŸ¬í•œ ë¬¸ì œì˜ í•´ê²° ë°©ë²•ì´ java.util ë¼ì´ë¸Œë¦¬ëŸ¬ì— ì»¨í…Œì´ë„ˆ í´ë˜ìŠ¤ì´ë©° ê¸°ë³¸ íƒ€ì…ë“¤ì€ List, Set, Queue, Mapì´ë‹¤.

<hr/>

### â“ ê·¸ëŸ¼ ì–¸ì œ ì“°ì´ëŠ”ê±¸ê¹Œ?
íƒ€ì…ì˜ ìˆ˜ì— ì œì•½ì—†ì´ ìœ ì—°í•˜ê²Œ í•„ìš”í•œ ê²½ìš°, íŠ¹ì • íƒ€ì… ì™¸ì— ë‹¤ì–‘í•œ íƒ€ì…ì„ ì§€ì›í•´ì•¼í•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.
> Set<E>, Map<K,V> ì²˜ëŸ¼ í´ë˜ìŠ¤ ë ˆë²¨ì—ì„œ ë§¤ê°œë³€ìˆ˜í™” í•  ìˆ˜ ìˆëŠ” íƒ€ì…ì˜ ìˆ˜ëŠ” ì œí•œì ì´ë‹¤.

```java
public class Favorites {
    private Map<Class<?>, Object> favorites = new HashMap<>();

    public <T> void put(Class<T> type, T instance) {
        favorites.put(Objects.requireNonNull(type), instance);
    }

    public <T> T get(Class<T> type) {
        return type.cast(favorites.get(type));
    }
}
```
	
```java
    @Test
    @DisplayName("íƒ€ì… ì•ˆì „ ì´ì¢… ì»¨í…Œì´ë„ˆ íŒ¨í„´ êµ¬í˜„")
    void ì»¨í…Œì´ë„ˆ() {
        Favorites favorites = new Favorites();

        favorites.put(String.class, "JiHoon");
        favorites.put(Integer.class, 1234);
        favorites.put(Class.class, Favorites.class);

        String favoriteStr = favorites.get(String.class);
        Integer favoriteInt = favorites.get(Integer.class);
        Class favoriteClass = favorites.get(Class.class);

        Assertions.assertEquals(favoriteStr, "JiHoon");
        Assertions.assertEquals(favoriteInt, 1234);
        Assertions.assertEquals(favoriteClass.getName(), "item33.Favorites");
    }
```
	
![image](https://user-images.githubusercontent.com/53300830/167058141-8db9fd63-8d61-4eaf-a4fe-de9ce51eb66f.png)
> ì»´íŒŒì¼íƒ€ì„ì— íƒ€ì… ì•ˆì „ì„±ì„ ë³´ì¥ë°›ê³ , mapì—ì„œ êº¼ë‚´ì˜¬ ë•Œ, íƒ€ì…ìºìŠ¤íŒ…ì„ í´ë¼ì´ì–¸íŠ¸ìª½ì—ì„œ í•´ì£¼ì§€ ì•Šì•„ë„ ëœë‹¤.
	
### â›”ï¸ ë‹¨ì  1. íƒ€ì… ì•ˆì „ì„±ì— ì™„ì „íˆ ììœ ë¡­ì§€ ëª»í•˜ë‹¤.
ì•…ì˜ì ìœ¼ë¡œ Class ê°ì²´ë¥¼ Raw íƒ€ì…ìœ¼ë¡œ ë„˜ê²¨ë²„ë¦¬ë©´ íƒ€ì… ì•ˆì „ì„±ì´ ê¹¨ì§„ë‹¤.
```java
favorites.put((Class)Integer.class,"ì´ê²ƒë„ ëœë‹¤.");
```
> ì»´íŒŒì¼ëŸ¬ì‹œ ë¹„ê²€ì‚¬ ê²½ê³ ê°€ ëœ¬ë‹¤.
	
```java
public <T> void put(Class<T> type, T instance) {
  favorites.put(Objects.requireNonNull(type), type.cast(instance));
//favorites.put(Objects.requireNonNull(type), instance);
}
```

### â›”ï¸ ë‹¨ì  2. ì‹¤ì²´í™” ë¶ˆê°€ íƒ€ì…ì—ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
Keyë¡œ Stringì´ë‚˜, String[]ì€ ê°€ëŠ¥í•˜ì§€ë§Œ, List<String> ê°™ì€ ì‹¤ì²´í™” ë¶ˆê°€ íƒ€ì…ì€ í•˜ì§€ ëª»í•œë‹¤.

ê°„ë‹¨íˆ ìƒê°í•´ë³´ë©´ `List<String>` `List<Integer>` ë‘˜ ë‹¤ ì„œë¡œ Listì´ê¸° ë•Œë¬¸ì— ê°™ì€ íƒ€ì…ì„ ë°˜í™˜í•˜ê²Œ ëœë‹¤. ê·¸ëŸ¬ë©´ ë¬´ìŠ¨ ë¬¸ì œê°€ ìƒê¸¸ì§€ëŠ” ì•ˆë´ë„ ë»”í•˜ë‹¤.

ì•„ì‰½ê²Œë„ ì™„ë²½í•œ í•´ê²°ë²•ì€ ì—†ë‹¤ê³  í•œë‹¤. [[ì°¸ê³ ]](http://gafter.blogspot.com/2006/12/super-type-tokens.html)



